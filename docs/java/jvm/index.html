<!DOCTYPE html>
<html lang="zh-cn" dir="ltr" class="scroll-smooth" data-default-appearance="dark"
  data-auto-appearance="true"><head>
  <meta charset="utf-8" />
  
  <meta http-equiv="content-language" content="zh-cn" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>JVM &middot; TCmatj的个人博客</title>
  <meta name="title" content="JVM &middot; TCmatj的个人博客" />
  
  <meta name="description" content="Java Virtul Machine" />
  
  
  
  <link rel="canonical" href="https://TCmatj.github.io/docs/java/jvm/" />
  
  
  
  
  
  
  
  
  
  
  <link type="text/css" rel="stylesheet" href="/css/main.bundle.min.85f006de1806b55b2d082d1122deedd8cec6fdc1f7c8a51be975a4496165d6c798f4a3de52545a6a87cc4bc09fc2d6f5201d44ea57acc1ac2b1c42a688c62bee.css"
    integrity="sha512-hfAG3hgGtVstCC0RIt7t2M7G/cH3yKUb6XWkSWFl1seY9KPeUlRaaofMS8Cfwtb1IB1E6leswawrHEKmiMYr7g==" />
  
  
  <script type="text/javascript" src="/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js"
    integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj&#43;e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
  
  
  
  
  
  
  
  
  
  
  
  
  <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.f5c7687e2a3365a5a366307858918deafa574ab869c626f69dcdd5363e26a725991d0efa1aaaff7ba4b7e2472876189d153d2f9b46a39206caf364407e2aaa77.js"
    integrity="sha512-9cdofiozZaWjZjB4WJGN6vpXSrhpxib2nc3VNj4mpyWZHQ76Gqr/e6S34kcodhidFT0vm0ajkgbK82RAfiqqdw==" data-copy="" data-copied=""></script>
  
  
  <script src="/js/zoom.min.js"></script>
  
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  <meta property="og:url" content="https://TCmatj.github.io/docs/java/jvm/">
  <meta property="og:site_name" content="TCmatj的个人博客">
  <meta property="og:title" content="JVM">
  <meta property="og:description" content="Java Virtul Machine">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
    <meta property="og:image" content="https://TCmatj.github.io/docs/java/jvm/featured.png">

  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://TCmatj.github.io/docs/java/jvm/featured.png">
  <meta name="twitter:title" content="JVM">
  <meta name="twitter:description" content="Java Virtul Machine">

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Docs",
    "name": "JVM",
    "headline": "JVM",
    "description": "Java Virtul Machine",
    "abstract": "https:\/\/juejin.cn\/post\/7094121178373029895 三大核心功能：内存管理、解释执行虚拟机指令、即时编译 一、组",
    "inLanguage": "zh-cn",
    "url" : "https:\/\/TCmatj.github.io\/docs\/java\/jvm\/",
    "author" : {
      "@type": "Person",
      "name": "TCmatj"
    },
    
    
    
    
    
    
    
    
    "mainEntityOfPage": "true",
    "wordCount": "11773"
  }]
  </script>


  
  
  <meta name="author" content="TCmatj" />
  
  
  
  <link href="https://github.com/TCmatj" rel="me" />
  
  
  
  

<script src="/lib/jquery/jquery.slim.min.js" integrity=""></script>





















  
  

<script async src="https://www.googletagmanager.com/gtag/js?id=G-PEDMYR1V0K"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PEDMYR1V0K');
</script>


  
  
  <meta name="theme-color"/>
  
  
  
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script>

    const firebaseConfig = {
      apiKey: "AIzaSyDe2xnkus6Wsn0D2GU6RKbkRX9exAYhwio",
      authDomain: "AIzaSyDe2xnkus6Wsn0D2GU6RKbkRX9exAYhwio",
      projectId: "blog-53c93",
      storageBucket: "blog-53c93.appspot.com",
      messagingSenderId: "688956731234",
      appId: "1:688956731234:web:3eae3e633a453e1b17063b",
      measurementId: "G-ZXHSY9W6LL"
    };

    var app = firebase.initializeApp(firebaseConfig);
    var db = firebase.firestore();
    var auth = firebase.auth();

  </script>
  
  
</head>
<body
  class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">
  <div id="the-top" class="absolute flex self-center">
    <a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
      href="#main-content"><span
        class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>跳过正文</a>
  </div>
  
  
  <div class="min-h-[148px]"></div>
<div class="fixed inset-x-0 pl-[24px] pr-[24px]" style="z-index:100">
  <div id="menu-blur" class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div>
  <div class="relative max-w-[64rem] ml-auto mr-auto">
    <div style="padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px"
    class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3">
    
    
    
    <div>
        <a href="/" class="flex">
            <span class="sr-only">TCmatj的个人博客</span>

            <img src="/img/blowfish_logo_transparent.png" width="1000" height="1000"
                class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom" alt="TCmatj的个人博客" />

        </a>
    </div>
    
    <div class="flex flex-1 items-center justify-between">
        <nav class="flex space-x-3">

            
            <a href="/" class="text-base font-medium text-gray-500 hover:text-gray-900">TCmatj的个人博客</a>
            

        </nav>
        <nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12">

            
            
             
  <div>
  <div class="cursor-pointer flex items-center nested-menu">
    
    <a  class="text-base font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="">
      Java
    </a>
    <span>
      

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


    </span>
  </div>
  <div class="absolute menuhide">
    <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl">
      <div class="flex flex-col space-y-3">
        
        <a href="/docs/java/java%E5%9F%BA%E7%A1%80/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Java基础
          </p>
        </a>
        
        <a href="/docs/java/jvm/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            JVM
          </p>
        </a>
        
        <a href="/docs/java/juc/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            JUC
          </p>
        </a>
        
        <a href="/docs/java/stream%E6%B5%81%E4%B8%8Eio%E6%B5%81/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Stream流与IO流
          </p>
        </a>
        
        <a href="/docs/java/springboot/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            SpringBoot
          </p>
        </a>
        
      </div>
    </div>
  </div>
</div>



            
             
  <div>
  <div class="cursor-pointer flex items-center nested-menu">
    
    <a  class="text-base font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="">
      Python
    </a>
    <span>
      

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


    </span>
  </div>
  <div class="absolute menuhide">
    <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl">
      <div class="flex flex-col space-y-3">
        
        <a href="/docs/python/python/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Python入门
          </p>
        </a>
        
        <a href="/docs/python/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            机器学习
          </p>
        </a>
        
        <a href="/docs/python/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            深度学习
          </p>
        </a>
        
      </div>
    </div>
  </div>
</div>



            
             
  <div>
  <div class="cursor-pointer flex items-center nested-menu">
    
    <a  class="text-base font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="">
      MySQL
    </a>
    <span>
      

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


    </span>
  </div>
  <div class="absolute menuhide">
    <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl">
      <div class="flex flex-col space-y-3">
        
        <a href="/docs/mysql/mysql%E8%AF%AD%E6%B3%95/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            MySQL语法
          </p>
        </a>
        
        <a href="/docs/mysql/mysql%E5%8E%9F%E7%90%86/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            MySQL原理
          </p>
        </a>
        
        <a href="/docs/mysql/mybatis/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            MyBatis
          </p>
        </a>
        
      </div>
    </div>
  </div>
</div>



            
             
  <div>
  <div class="cursor-pointer flex items-center nested-menu">
    
    <a  class="text-base font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="">
      Redis
    </a>
    <span>
      

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


    </span>
  </div>
  <div class="absolute menuhide">
    <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl">
      <div class="flex flex-col space-y-3">
        
        <a href="/docs/redis/redis/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Redis入门与原理
          </p>
        </a>
        
        <a href="/docs/redis/lua/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Lua脚本
          </p>
        </a>
        
        <a href="/docs/redis/redis%E4%BD%BF%E7%94%A8/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Redis使用
          </p>
        </a>
        
      </div>
    </div>
  </div>
</div>



            
             
  <div>
  <div class="cursor-pointer flex items-center nested-menu">
    
    <a  class="text-base font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="">
      工具
    </a>
    <span>
      

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


    </span>
  </div>
  <div class="absolute menuhide">
    <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl">
      <div class="flex flex-col space-y-3">
        
        <a href="/docs/%E5%B7%A5%E5%85%B7/linux/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Linux
          </p>
        </a>
        
        <a href="/docs/%E5%B7%A5%E5%85%B7/docker/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Docker
          </p>
        </a>
        
        <a href="/docs/%E5%B7%A5%E5%85%B7/maven/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Maven
          </p>
        </a>
        
        <a href="/docs/%E5%B7%A5%E5%85%B7/git/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Git
          </p>
        </a>
        
      </div>
    </div>
  </div>
</div>



            
             
  <div>
  <div class="cursor-pointer flex items-center nested-menu">
    
    <a  class="text-base font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="">
      其他
    </a>
    <span>
      

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


    </span>
  </div>
  <div class="absolute menuhide">
    <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl">
      <div class="flex flex-col space-y-3">
        
        <a href="/docs/%E5%85%B6%E4%BB%96/%E7%8A%B6%E6%80%81%E6%9C%BA/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            状态机
          </p>
        </a>
        
        <a href="/docs/%E5%85%B6%E4%BB%96/%E7%AE%97%E6%B3%95/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            算法
          </p>
        </a>
        
        <a href="/docs/%E5%85%B6%E4%BB%96/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            设计模式
          </p>
        </a>
        
      </div>
    </div>
  </div>
</div>



            
            
  <a href="https://github.com/TCmatj"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <span >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>


    </span>
    
    <p class="text-base font-medium" title="">
        
    </p>
</a>



            
            

            


            
            <button id="search-button" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            


            
            
            <div
                class="ltr:mr-14 rtl:ml-14 flex items-center">
                <button id="appearance-switcher" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400">
                    <div class="flex items-center justify-center dark:hidden">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                    </div>
                    <div class="items-center justify-center hidden dark:flex">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                    </div>
                </button>
            </div>
            

        </nav>
        <div class="flex md:hidden items-center space-x-5 md:ml-12 h-12">

            <span></span>

            


            
            <button id="search-button-mobile" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            

            
            
            <button id="appearance-switcher-mobile" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400" style="margin-right:5px">
                <div class="flex items-center justify-center dark:hidden">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                </div>
                <div class="items-center justify-center hidden dark:flex">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                </div>
            </button>
            

        </div>
    </div>
    <div class="-my-2 -mr-2 md:hidden">

        <label id="menu-button" for="menu-controller" class="block">
            <input type="checkbox" id="menu-controller" class="hidden" />
            
            <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
                

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>

  </span>


            </div>
            <div id="menu-wrapper" style="padding-top:5px;"
                class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50">
                <ul
                    class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl">

                    <li>
                        <span
                            class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>

</span>
                    </li>

                    

                     
  <li class="mt-1">
    <a class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            Java
        </p>
        <span>
            

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


        </span>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/java/java%E5%9F%BA%E7%A1%80/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Java基础
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/java/jvm/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            JVM
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/java/juc/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            JUC
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/java/stream%E6%B5%81%E4%B8%8Eio%E6%B5%81/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Stream流与IO流
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/java/springboot/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            SpringBoot
        </p>
    </a>
</li>

<li class="mb-2"></li>




                    

                     
  <li class="mt-1">
    <a class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            Python
        </p>
        <span>
            

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


        </span>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/python/python/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Python入门
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/python/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            机器学习
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/python/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            深度学习
        </p>
    </a>
</li>

<li class="mb-2"></li>




                    

                     
  <li class="mt-1">
    <a class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            MySQL
        </p>
        <span>
            

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


        </span>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/mysql/mysql%E8%AF%AD%E6%B3%95/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            MySQL语法
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/mysql/mysql%E5%8E%9F%E7%90%86/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            MySQL原理
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/mysql/mybatis/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            MyBatis
        </p>
    </a>
</li>

<li class="mb-2"></li>




                    

                     
  <li class="mt-1">
    <a class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            Redis
        </p>
        <span>
            

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


        </span>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/redis/redis/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Redis入门与原理
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/redis/lua/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Lua脚本
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/redis/redis%E4%BD%BF%E7%94%A8/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Redis使用
        </p>
    </a>
</li>

<li class="mb-2"></li>




                    

                     
  <li class="mt-1">
    <a class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            工具
        </p>
        <span>
            

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


        </span>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/%E5%B7%A5%E5%85%B7/linux/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Linux
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/%E5%B7%A5%E5%85%B7/docker/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Docker
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/%E5%B7%A5%E5%85%B7/maven/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Maven
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/%E5%B7%A5%E5%85%B7/git/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Git
        </p>
    </a>
</li>

<li class="mb-2"></li>




                    

                     
  <li class="mt-1">
    <a class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            其他
        </p>
        <span>
            

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


        </span>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/%E5%85%B6%E4%BB%96/%E7%8A%B6%E6%80%81%E6%9C%BA/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            状态机
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/%E5%85%B6%E4%BB%96/%E7%AE%97%E6%B3%95/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            算法
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/docs/%E5%85%B6%E4%BB%96/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            设计模式
        </p>
    </a>
</li>

<li class="mb-2"></li>




                    

                    
  <li class="mt-1">
    <a href="https://github.com/TCmatj"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <div >
            

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>


        </div>
        
        <p class="text-bg font-bg" title="">
            
        </p>
    </a>
</li>




                    

                </ul>
                
                

            </div>
        </label>
    </div>
</div>




<script>
    (function () {
        var $mainmenu = $('.main-menu');
        var path = window.location.pathname;
        $mainmenu.find('a[href="' + path + '"]').each(function (i, e) {
            $(e).children('p').addClass('active');
        });
    })();
</script>


  </div>
</div>
<script>
  window.addEventListener('scroll', function (e) {
    var scroll = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
    var background_blur = document.getElementById('menu-blur');
    background_blur.style.opacity = (scroll / 300);
  });
</script>

  
  <div class="relative flex flex-col grow">
    <main id="main-content" class="grow">
      


<article>
  
  
  
  
  
  


<div id="hero" class="h-[150px] md:h-[200px]"></div>



    
    <div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom"
    style="background-image:url(/docs/java/jvm/featured_hu318cbb175d2cfa2c7c90e95de033c22a_5219_1200x0_resize_box_3.png);">
    


    <div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal">
    </div>
    <div
        class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal">
    </div>
</div>

<div id="background-blur" class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div>
<script>
    window.addEventListener('scroll', function (e) {
        var scroll = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
        var background_blur = document.getElementById('background-blur');
        background_blur.style.opacity = (scroll / 300)
    });
</script>

  
  

  <header id="single_header" class="mt-5 max-w-prose">
    
    <ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden">
  
  
    
  
    
  
  <li class="inline hidden">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/"
      >欢迎来到 Blowfish! :tada:</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline ">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/docs/"
      >Docs</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline hidden">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/docs/java/jvm/"
      >JVM</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

</ol>


    
    <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
      JVM
    </h1>
    <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
      





  
  







  





  



  



  



  



  





  



<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="0001-01-01 00:00:00 &#43;0000 UTC">0001-01-01</time><span class="px-2 text-primary-500">&middot;</span><span>11773 字</span><span class="px-2 text-primary-500">&middot;</span><span title="预计阅读">24 分钟</span><span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span id="views_docs/Java/JVM/index.md" class="animate-pulse inline-block text-transparent max-h-3 rounded-full mt-[-2px] align-middle bg-neutral-300 dark:bg-neutral-400" title="views">loading</span>
  <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
<path fill="currentColor" d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg>
  </span>

</span>
</span><span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span id="likes_docs/Java/JVM/index.md"
    class="animate-pulse inline-block text-transparent max-h-3 rounded-full mt-[-2px] align-middle bg-neutral-300 dark:bg-neutral-400"
    title="likes">loading</span>
  <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg>
  </span>

</span>
</span><span class="px-2 text-primary-500">&middot;</span><span>
    <button id="button_likes"
        class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400"
        onclick="process_article()">
        <span id="button_likes_heart" style="display:none" class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg>
  </span>

 </span>
        <span id="button_likes_emtpty_heart" class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M244 84L255.1 96L267.1 84.02C300.6 51.37 347 36.51 392.6 44.1C461.5 55.58 512 115.2 512 185.1V190.9C512 232.4 494.8 272.1 464.4 300.4L283.7 469.1C276.2 476.1 266.3 480 256 480C245.7 480 235.8 476.1 228.3 469.1L47.59 300.4C17.23 272.1 0 232.4 0 190.9V185.1C0 115.2 50.52 55.58 119.4 44.1C164.1 36.51 211.4 51.37 244 84C243.1 84 244 84.01 244 84L244 84zM255.1 163.9L210.1 117.1C188.4 96.28 157.6 86.4 127.3 91.44C81.55 99.07 48 138.7 48 185.1V190.9C48 219.1 59.71 246.1 80.34 265.3L256 429.3L431.7 265.3C452.3 246.1 464 219.1 464 190.9V185.1C464 138.7 430.4 99.07 384.7 91.44C354.4 86.4 323.6 96.28 301.9 117.1L255.1 163.9z"/></svg>
  </span>

</span>
        <span id="button_likes_text">&nbsp;Like</span>
    </button>
</span><span class="px-2 text-primary-500">&middot;</span>


<script type="text/javascript" src="/js/zen-mode.min.63c8a202661f4a2063fdc2706685d668e8ea3da613da2224e9da527e5876e4f53dcac39ab60732626fb4151feae5d430d0cf44731e5d3c726522fcc1519c1547.js" integrity="sha512-Y8iiAmYfSiBj/cJwZoXWaOjqPaYT2iIk6dpSflh25PU9ysOatgcyYm&#43;0FR/q5dQw0M9Ecx5dPHJlIvzBUZwVRw=="></script>

<span class="mb-[2px]">
    <span id="zen-mode-button"
          class="text-lg hover:text-primary-500"
          title=""
          data-title-i18n-disable=""
          data-title-i18n-enable="">
        <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="50px" height="50px">
    <path fill="currentColor" d="M 12.980469 4 C 9.1204688 4 5.9804688 7.14 5.9804688 11 L 6 26 L 9.9804688 26 L 9.9804688 11 C 9.9804688 9.35 11.320469 8 12.980469 8 L 40.019531 8 C 41.679531 8 43.019531 9.35 43.019531 11 L 43.019531 39 C 43.019531 40.65 41.679531 42 40.019531 42 L 29 42 C 29 43.54 28.420938 44.94 27.460938 46 L 40.019531 46 C 43.879531 46 47.019531 42.86 47.019531 39 L 47.019531 11 C 47.019531 7.14 43.879531 4 40.019531 4 L 12.980469 4 z M 7 28 C 4.794 28 3 29.794 3 32 L 3 42 C 3 44.206 4.794 46 7 46 L 23 46 C 25.206 46 27 44.206 27 42 L 27 32 C 27 29.794 25.206 28 23 28 L 7 28 z M 7 32 L 23 32 L 23.001953 42 L 7 42 L 7 32 z"/>
</svg>
  </span>

</span>
    </span>
</span>
  

  
  
</div>


<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
</div>




<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
  
  
</div>



    </div>

    
    
    
    
    

    

    
      
      
        
        
<div class="flex author">
  
    
    
      
    
    
      
        
      
      <img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width="96" height="96"
      alt="TCmatj" src="/img/blowfish_logo_hu184ea2fa12490a2458ca388a16ab730e_227816_192x192_fill_box_center_3.png" />
    
  
  <div class="place-self-center">
    
    <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
      作者
    </div>
    <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
      TCmatj
    </div>
    
    
    <div class="text-sm text-neutral-700 dark:text-neutral-400">浙江理工大学</div>
    
    <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://github.com/TCmatj"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>

</span></a
        >
      
    
  </div>

</div>
  </div>
</div>

      

      

      
      <div class="mb-5"></div>
      

    

  </header>
  
  <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
    
     <div
      class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8">
      <div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]">

         <details open id="TOCView"
  class="toc-right mt-0 overflow-y-scroll overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    目录
  </summary>
  <div
    class="min-w-[220px] py-2 border-dotted ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#一组成">一、组成</a></li>
    <li><a href="#二字节码文件">二、字节码文件</a>
      <ul>
        <li><a href="#1打开">1.打开</a></li>
        <li><a href="#2组成">2.组成</a>
          <ul>
            <li><a href="#基础信息">基础信息</a></li>
            <li><a href="#常量池">常量池</a></li>
            <li><a href="#字段">字段</a></li>
            <li><a href="#方法">方法</a></li>
            <li><a href="#属性">属性</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#三类加载器">三、类加载器</a>
      <ul>
        <li><a href="#1类的生命周期">1.类的生命周期</a>
          <ul>
            <li><a href="#加载">加载</a></li>
            <li><a href="#连接">连接</a></li>
            <li><a href="#初始化">初始化</a></li>
          </ul>
        </li>
        <li><a href="#2类加载器">2.类加载器</a>
          <ul>
            <li><a href="#1类加载器的分类">1）类加载器的分类</a></li>
            <li><a href="#2启动类加载器">2）启动类加载器</a></li>
            <li><a href="#3拓展类加载器和应用程序类加载器">3）拓展类加载器和应用程序类加载器</a></li>
            <li><a href="#4双亲委派机制">4）双亲委派机制</a></li>
            <li><a href="#5打破双亲委派机制">5）打破双亲委派机制</a></li>
            <li><a href="#6jdk9之后的类加载器">6）JDK9之后的类加载器</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#四运行时数据区域">四、运行时数据区域</a>
      <ul>
        <li><a href="#1划分">1.划分</a></li>
        <li><a href="#2pc">2.PC</a></li>
        <li><a href="#3jvm栈">3.JVM栈</a></li>
        <li><a href="#4本地方法栈">4.本地方法栈</a></li>
        <li><a href="#5堆">5.堆</a></li>
        <li><a href="#6方法区">6.方法区</a>
          <ul>
            <li><a href="#1元信息">1）元信息</a></li>
            <li><a href="#2运行时常量池">2）运行时常量池</a></li>
            <li><a href="#3字符串常量池">3）字符串常量池</a></li>
          </ul>
        </li>
        <li><a href="#7直接内存">7.直接内存</a></li>
      </ul>
    </li>
    <li><a href="#五垃圾回收器">五、垃圾回收器</a>
      <ul>
        <li><a href="#1方法区的回收-类">1.方法区的回收-类</a></li>
        <li><a href="#2堆回收-对象">2.堆回收-对象</a>
          <ul>
            <li><a href="#1引用计数法java未使用">1）引用计数法（Java未使用）</a></li>
            <li><a href="#2可达性分析法java使用">2）可达性分析法（Java使用）</a></li>
          </ul>
        </li>
        <li><a href="#3其它引用">3.其它引用</a>
          <ul>
            <li><a href="#1软引用">1.软引用</a></li>
            <li><a href="#2弱引用">2.弱引用</a></li>
            <li><a href="#3虚引用">3.虚引用</a></li>
            <li><a href="#4终结器引用">4.终结器引用</a></li>
          </ul>
        </li>
        <li><a href="#4垃圾回收算法">4.垃圾回收算法</a>
          <ul>
            <li><a href="#1评价标准">1.评价标准</a></li>
            <li><a href="#2回收算法">2.回收算法</a></li>
          </ul>
        </li>
        <li><a href="#5垃圾回收器">5.垃圾回收器</a>
          <ul>
            <li><a href="#1年轻代-serial垃圾回收器">1.年轻代-Serial垃圾回收器</a></li>
            <li><a href="#2老年代-serialold垃圾回收器">2.老年代-SerialOld垃圾回收器</a></li>
            <li><a href="#3年轻代-parnew垃圾回收器">3.年轻代-ParNew垃圾回收器</a></li>
            <li><a href="#4老年代-cms垃圾回收器">4.老年代-CMS垃圾回收器</a></li>
            <li><a href="#5年轻代-parallel-scavenge垃圾回收器">5.年轻代-Parallel Scavenge垃圾回收器</a></li>
            <li><a href="#6老年代-parallel-old垃圾回收器">6.老年代-Parallel Old垃圾回收器</a></li>
            <li><a href="#7g1garbage-first垃圾回收器">7.G1(Garbage First)垃圾回收器</a></li>
            <li><a href="#8组合选择">8.组合选择</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#六其他">六、其他</a>
      <ul>
        <li><a href="#1-gc调优思路">1. GC调优思路</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#1下载与启动">1.下载与启动</a></li>
    <li><a href="#2退出">2.退出</a></li>
    <li><a href="#3命令列表">3.命令列表</a>
      <ul>
        <li><a href="#httpsarthasaliyuncomdoccommandshtmljvm-相关jvm-相关"><a href="https://arthas.aliyun.com/doc/commands.html#jvm-%E7%9B%B8%E5%85%B3">#</a>jvm 相关</a></li>
        <li><a href="#httpsarthasaliyuncomdoccommandshtmlclass-classloader-相关classclassloader-相关"><a href="https://arthas.aliyun.com/doc/commands.html#class-classloader-%E7%9B%B8%E5%85%B3">#</a>class/classloader 相关</a></li>
        <li><a href="#httpsarthasaliyuncomdoccommandshtmlmonitor-watch-trace-相关monitorwatchtrace-相关"><a href="https://arthas.aliyun.com/doc/commands.html#monitor-watch-trace-%E7%9B%B8%E5%85%B3">#</a>monitor/watch/trace 相关</a></li>
        <li><a href="#httpsarthasaliyuncomdoccommandshtmlprofiler-火焰图profiler火焰图"><a href="https://arthas.aliyun.com/doc/commands.html#profiler-%E7%81%AB%E7%84%B0%E5%9B%BE">#</a>profiler/火焰图</a></li>
        <li><a href="#httpsarthasaliyuncomdoccommandshtml鉴权鉴权"><a href="https://arthas.aliyun.com/doc/commands.html#%E9%89%B4%E6%9D%83">#</a>鉴权</a></li>
        <li><a href="#httpsarthasaliyuncomdoccommandshtmloptionsoptions"><a href="https://arthas.aliyun.com/doc/commands.html#options">#</a>options</a></li>
        <li><a href="#httpsarthasaliyuncomdoccommandshtml管道管道"><a href="https://arthas.aliyun.com/doc/commands.html#%E7%AE%A1%E9%81%93">#</a>管道</a></li>
        <li><a href="#httpsarthasaliyuncomdoccommandshtml后台异步任务后台异步任务"><a href="https://arthas.aliyun.com/doc/commands.html#%E5%90%8E%E5%8F%B0%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1">#</a>后台异步任务</a></li>
        <li><a href="#httpsarthasaliyuncomdoccommandshtml基础命令基础命令"><a href="https://arthas.aliyun.com/doc/commands.html#%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4">#</a>基础命令</a></li>
      </ul>
    </li>
    <li><a href="#4-热部署">4. 热部署</a></li>
  </ul>
</nav>
  </div>
</details>
<details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden">
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    目录
  </summary>
  <div
    class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#一组成">一、组成</a></li>
    <li><a href="#二字节码文件">二、字节码文件</a>
      <ul>
        <li><a href="#1打开">1.打开</a></li>
        <li><a href="#2组成">2.组成</a>
          <ul>
            <li><a href="#基础信息">基础信息</a></li>
            <li><a href="#常量池">常量池</a></li>
            <li><a href="#字段">字段</a></li>
            <li><a href="#方法">方法</a></li>
            <li><a href="#属性">属性</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#三类加载器">三、类加载器</a>
      <ul>
        <li><a href="#1类的生命周期">1.类的生命周期</a>
          <ul>
            <li><a href="#加载">加载</a></li>
            <li><a href="#连接">连接</a></li>
            <li><a href="#初始化">初始化</a></li>
          </ul>
        </li>
        <li><a href="#2类加载器">2.类加载器</a>
          <ul>
            <li><a href="#1类加载器的分类">1）类加载器的分类</a></li>
            <li><a href="#2启动类加载器">2）启动类加载器</a></li>
            <li><a href="#3拓展类加载器和应用程序类加载器">3）拓展类加载器和应用程序类加载器</a></li>
            <li><a href="#4双亲委派机制">4）双亲委派机制</a></li>
            <li><a href="#5打破双亲委派机制">5）打破双亲委派机制</a></li>
            <li><a href="#6jdk9之后的类加载器">6）JDK9之后的类加载器</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#四运行时数据区域">四、运行时数据区域</a>
      <ul>
        <li><a href="#1划分">1.划分</a></li>
        <li><a href="#2pc">2.PC</a></li>
        <li><a href="#3jvm栈">3.JVM栈</a></li>
        <li><a href="#4本地方法栈">4.本地方法栈</a></li>
        <li><a href="#5堆">5.堆</a></li>
        <li><a href="#6方法区">6.方法区</a>
          <ul>
            <li><a href="#1元信息">1）元信息</a></li>
            <li><a href="#2运行时常量池">2）运行时常量池</a></li>
            <li><a href="#3字符串常量池">3）字符串常量池</a></li>
          </ul>
        </li>
        <li><a href="#7直接内存">7.直接内存</a></li>
      </ul>
    </li>
    <li><a href="#五垃圾回收器">五、垃圾回收器</a>
      <ul>
        <li><a href="#1方法区的回收-类">1.方法区的回收-类</a></li>
        <li><a href="#2堆回收-对象">2.堆回收-对象</a>
          <ul>
            <li><a href="#1引用计数法java未使用">1）引用计数法（Java未使用）</a></li>
            <li><a href="#2可达性分析法java使用">2）可达性分析法（Java使用）</a></li>
          </ul>
        </li>
        <li><a href="#3其它引用">3.其它引用</a>
          <ul>
            <li><a href="#1软引用">1.软引用</a></li>
            <li><a href="#2弱引用">2.弱引用</a></li>
            <li><a href="#3虚引用">3.虚引用</a></li>
            <li><a href="#4终结器引用">4.终结器引用</a></li>
          </ul>
        </li>
        <li><a href="#4垃圾回收算法">4.垃圾回收算法</a>
          <ul>
            <li><a href="#1评价标准">1.评价标准</a></li>
            <li><a href="#2回收算法">2.回收算法</a></li>
          </ul>
        </li>
        <li><a href="#5垃圾回收器">5.垃圾回收器</a>
          <ul>
            <li><a href="#1年轻代-serial垃圾回收器">1.年轻代-Serial垃圾回收器</a></li>
            <li><a href="#2老年代-serialold垃圾回收器">2.老年代-SerialOld垃圾回收器</a></li>
            <li><a href="#3年轻代-parnew垃圾回收器">3.年轻代-ParNew垃圾回收器</a></li>
            <li><a href="#4老年代-cms垃圾回收器">4.老年代-CMS垃圾回收器</a></li>
            <li><a href="#5年轻代-parallel-scavenge垃圾回收器">5.年轻代-Parallel Scavenge垃圾回收器</a></li>
            <li><a href="#6老年代-parallel-old垃圾回收器">6.老年代-Parallel Old垃圾回收器</a></li>
            <li><a href="#7g1garbage-first垃圾回收器">7.G1(Garbage First)垃圾回收器</a></li>
            <li><a href="#8组合选择">8.组合选择</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#六其他">六、其他</a>
      <ul>
        <li><a href="#1-gc调优思路">1. GC调优思路</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#1下载与启动">1.下载与启动</a></li>
    <li><a href="#2退出">2.退出</a></li>
    <li><a href="#3命令列表">3.命令列表</a>
      <ul>
        <li><a href="#httpsarthasaliyuncomdoccommandshtmljvm-相关jvm-相关"><a href="https://arthas.aliyun.com/doc/commands.html#jvm-%E7%9B%B8%E5%85%B3">#</a>jvm 相关</a></li>
        <li><a href="#httpsarthasaliyuncomdoccommandshtmlclass-classloader-相关classclassloader-相关"><a href="https://arthas.aliyun.com/doc/commands.html#class-classloader-%E7%9B%B8%E5%85%B3">#</a>class/classloader 相关</a></li>
        <li><a href="#httpsarthasaliyuncomdoccommandshtmlmonitor-watch-trace-相关monitorwatchtrace-相关"><a href="https://arthas.aliyun.com/doc/commands.html#monitor-watch-trace-%E7%9B%B8%E5%85%B3">#</a>monitor/watch/trace 相关</a></li>
        <li><a href="#httpsarthasaliyuncomdoccommandshtmlprofiler-火焰图profiler火焰图"><a href="https://arthas.aliyun.com/doc/commands.html#profiler-%E7%81%AB%E7%84%B0%E5%9B%BE">#</a>profiler/火焰图</a></li>
        <li><a href="#httpsarthasaliyuncomdoccommandshtml鉴权鉴权"><a href="https://arthas.aliyun.com/doc/commands.html#%E9%89%B4%E6%9D%83">#</a>鉴权</a></li>
        <li><a href="#httpsarthasaliyuncomdoccommandshtmloptionsoptions"><a href="https://arthas.aliyun.com/doc/commands.html#options">#</a>options</a></li>
        <li><a href="#httpsarthasaliyuncomdoccommandshtml管道管道"><a href="https://arthas.aliyun.com/doc/commands.html#%E7%AE%A1%E9%81%93">#</a>管道</a></li>
        <li><a href="#httpsarthasaliyuncomdoccommandshtml后台异步任务后台异步任务"><a href="https://arthas.aliyun.com/doc/commands.html#%E5%90%8E%E5%8F%B0%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1">#</a>后台异步任务</a></li>
        <li><a href="#httpsarthasaliyuncomdoccommandshtml基础命令基础命令"><a href="https://arthas.aliyun.com/doc/commands.html#%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4">#</a>基础命令</a></li>
      </ul>
    </li>
    <li><a href="#4-热部署">4. 热部署</a></li>
  </ul>
</nav>
  </div>
</details>

<script>

  var margin = 200;
  var marginError = 50;

  (function () {
    var $window = $(window);
    var $toc = $('#TOCView');
    var tocHeight = $toc.height();

    function onResize() {
      var windowAndMarginHeight = $window.height() - margin;
      if(tocHeight >= windowAndMarginHeight) {
        $toc.css("overflow-y", "scroll")
        $toc.css("max-height", (windowAndMarginHeight + marginError) + "px")
      } else {
        $toc.css("overflow-y", "hidden")
        $toc.css("max-height", "9999999px")
      }
    }

    $window.on('resize', onResize);
    $(document).ready(onResize);
  })();



  (function () {
    var $toc = $('#TableOfContents');
    if ($toc.length > 0) {
      var $window = $(window);

      function onScroll() {
        var currentScroll = $window.scrollTop();
        var h = $('.anchor');
        var id = "";
        h.each(function (i, e) {
          e = $(e);
          if (e.offset().top - $(window).height()/3 <= currentScroll) {
            id = decodeURIComponent(e.attr('id'));
          }
        });
        var active = $toc.find('a.active');      
        if (active.length == 1 && active.eq(0).attr('href') == '#' + id) return true;

        active.each(function (i, e) {
          
            $(e).removeClass('active');
          
        });
        $toc.find('a[href="#' + id + '"]').addClass('active')
        $toc.find('a[href="#' + id + '"]').parentsUntil('#TableOfContents').each(function (i, e) {
          $(e).children('a').parents('ul').show();          
        });
      }

      $window.on('scroll', onScroll);
      $(document).ready(function () {
        
        onScroll();
      });
    }
  })();


</script>
   </div>
      </div>
      

      <div class="min-w-0 min-h-0 max-w-fit">
        
        


        <div class="article-content max-w-prose mb-20">
          <p><a href="https://juejin.cn/post/7094121178373029895" target="_blank">https://juejin.cn/post/7094121178373029895</a></p>
<p>三大核心功能：内存管理、解释执行虚拟机指令、即时编译</p>


<h2 class="relative group">一、组成 
    <div id="%E4%B8%80%E7%BB%84%E6%88%90" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E4%B8%80%E7%BB%84%E6%88%90" aria-label="锚点">#</a>
    </span>        
    
</h2>
<p>1.类加载器</p>
<p>2.运行时数据区域</p>
<p>3.执行引擎</p>
<p>4.本地接口</p>


<h2 class="relative group">二、字节码文件 
    <div id="%E4%BA%8C%E5%AD%97%E8%8A%82%E7%A0%81%E6%96%87%E4%BB%B6" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E4%BA%8C%E5%AD%97%E8%8A%82%E7%A0%81%E6%96%87%E4%BB%B6" aria-label="锚点">#</a>
    </span>        
    
</h2>


<h3 class="relative group">1.打开 
    <div id="1%E6%89%93%E5%BC%80" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1%E6%89%93%E5%BC%80" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>推荐 <code>jclasslib</code> 软件</p>


<h3 class="relative group">2.组成 
    <div id="2%E7%BB%84%E6%88%90" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2%E7%BB%84%E6%88%90" aria-label="锚点">#</a>
    </span>        
    
</h3>


<h4 class="relative group">基础信息 
    <div id="%E5%9F%BA%E7%A1%80%E4%BF%A1%E6%81%AF" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%9F%BA%E7%A1%80%E4%BF%A1%E6%81%AF" aria-label="锚点">#</a>
    </span>        
    
</h4>
<blockquote>
<p>魔数、字节码文件对应的Java版本号、访问标识、父类和接口</p>
</blockquote>
<p>魔数：文件的头几个字节，用于校验文件类型</p>
<p>主版本号：标识大版本号，用于判断是否兼容——jdk1.2之后，<code>jdk版本 = 大版本号 - 44</code></p>
<p>副版本号：主版本号相同时，区分不同版本（一般不需理会）</p>


<h4 class="relative group">常量池 
    <div id="%E5%B8%B8%E9%87%8F%E6%B1%A0" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%B8%B8%E9%87%8F%E6%B1%A0" aria-label="锚点">#</a>
    </span>        
    
</h4>
<blockquote>
<p>字符串常量、类或接口名、字段名</p>
</blockquote>
<p>字符串常量：避免重复内容重复定义，节省空间。</p>
<p>常量池中的数据都有个编号（从 1 开始），在<strong>字段或字节码</strong>指令中可以通过编号找到对应的数据。</p>
<p>字节码指令中通过编号找到对应的数据（<strong>符号引用</strong>）</p>


<h4 class="relative group">字段 
    <div id="%E5%AD%97%E6%AE%B5" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%AD%97%E6%AE%B5" aria-label="锚点">#</a>
    </span>        
    
</h4>
<blockquote>
<p>当前类或接口声明的字段信息(字段名、描述符、访问标识)</p>
</blockquote>


<h4 class="relative group">方法 
    <div id="%E6%96%B9%E6%B3%95" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E6%96%B9%E6%B3%95" aria-label="锚点">#</a>
    </span>        
    
</h4>
<blockquote>
<p>方法的字节码指令（放在方法的Code属性中）</p>
</blockquote>
<p>常见指令：</p>
<p><code>iconst_0</code>	将0放入操作数栈</p>
<p><code>istore_1</code>	将操作数栈中弹出一个放入局部变量表数组中位置1处</p>
<p><code>iload_1</code>	将局部变量表数组中位置1处复制到操作数栈中</p>
<p><code>iadd</code>		对出栈两个数求和后压栈</p>
<p><code>iinc 1 by 2</code>	将局部变量表数组中位置1处数据加2</p>
<p><code>return</code> 	方法结束</p>
<p><code>putstatic #2 &lt;init/Demo1.value : I&gt;</code> 从操作数栈中获取值放到静态变量中</p>
<p><code>i = i++; i = ++i; i++;</code> 线程不安全，<code>i += 1;</code> <strong>线程安全</strong>：</p>
<p>i = i++ 先把 i 取出放到临时的操作数栈，再对 i 加1，最后又使用之前的操作数栈的值覆盖<strong>得到 i</strong></p>
<pre tabindex="0"><code class="language-i=i++" data-lang="i=i++">iload_1
iinc 1 by 1
istore_1
</code></pre><p>i = ++i	结果为 i+1</p>
<pre tabindex="0"><code class="language-i=++i" data-lang="i=++i">iinc 2 by 1
iload_2
istore_2
</code></pre><p>i++</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">iload_1</span><span class="w">  </span><span class="c1">// 将i的值加载到栈顶</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">iinc</span><span class="w"> </span><span class="n">1</span><span class="p">,</span><span class="w"> </span><span class="n">1</span><span class="w">  </span><span class="c1">// 对i进行自增</span><span class="w">
</span></span></span></code></pre></div><p>i += 1</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="n">0</span><span class="p">,</span><span class="n">j</span><span class="o">=</span><span class="n">0</span><span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="n">0</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">i</span><span class="o">++</span><span class="p">;</span><span class="w">	</span><span class="c1">//iinc 1 by 1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">j</span><span class="o">=</span><span class="n">j</span><span class="o">+</span><span class="n">1</span><span class="p">;</span><span class="w">	</span><span class="c1">//iload_2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//iconst_1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//iadd</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//istore_2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">k</span><span class="o">+=</span><span class="n">1</span><span class="p">;</span><span class="w">	</span><span class="c1">//iinc 3 by 1</span><span class="w">
</span></span></span></code></pre></div><p><code>javap [字节码文件名称]</code> 命令</p>
<ul>
<li>-v</li>
</ul>


<h4 class="relative group">属性 
    <div id="%E5%B1%9E%E6%80%A7" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%B1%9E%E6%80%A7" aria-label="锚点">#</a>
    </span>        
    
</h4>
<blockquote>
<p>类的属性，如文件名、内部类的列表等</p>
</blockquote>


<h2 class="relative group">三、类加载器 
    <div id="%E4%B8%89%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E4%B8%89%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h2>


<h3 class="relative group">1.类的生命周期 
    <div id="1%E7%B1%BB%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1%E7%B1%BB%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>加载&ndash;连接（验证、准备、解析）&ndash;初始化&ndash;使用&ndash;卸载</p>


<h4 class="relative group">加载 
    <div id="%E5%8A%A0%E8%BD%BD" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%8A%A0%E8%BD%BD" aria-label="锚点">#</a>
    </span>        
    
</h4>
<ol>
<li>类加载器根据类的全限定名通过不同的渠道（本地文件、动态代理生成、网络传输）以二进制流的方式获取字节码信息。</li>
<li>将字节码中的信息保存到 <strong>方法区</strong>。</li>
<li>生成一个 <strong><code>InstanceKlass</code> 对象</strong>，保存类的所有信息（包含实现特定功能如多态的信息）</li>
<li>在堆中生成一份类似的 <strong><code>java.lang.Class</code> 对象</strong> 。用于在Java代码中获取类的信息以及存储静态字段的数据（JDK8之后）</li>
</ol>


<h4 class="relative group">连接 
    <div id="%E8%BF%9E%E6%8E%A5" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E8%BF%9E%E6%8E%A5" aria-label="锚点">#</a>
    </span>        
    
</h4>
<ol>
<li>
<p>验证：验证内容是否满足Java虚拟机规范，一般不需要程序员参与</p>
<blockquote>
<p>1.文件格式验证</p>
<p>2.元信息验证，如类必须有父类</p>
<p>3.验证程序执行指令的语义</p>
<p>4.符号引用验证</p>
</blockquote>
<p>版本号检测：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">major</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">JAVA_MIN_SUPPORTED_VERSION</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w">	</span><span class="c1">// 主版本号 JAVA_MIN_SUPPORTED_VERSION=45（JDK 1.0）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">(</span><span class="n">major</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">max_version</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> 	</span><span class="c1">// 支持的最高版本号 JDK8 中为52（JDK8）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">((</span><span class="n">major</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">max_version</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w">	</span><span class="c1">// 使用主版本号为最大主版本号</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">minor</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">JAVA_MAX_SUPPORTED_MINOR_VERSION</span><span class="p">)</span><span class="w">	</span><span class="c1">// 副版本号 JAVA_MAX_SUPPORTED_MINOR_VERSION=0（JDK未使用）</span><span class="w">
</span></span></span></code></pre></div></li>
<li>
<p>准备：给静态变量分配内存（堆区）并赋初值</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kt">int</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="kt">short</span><span class="w"> </span><span class="kt">byte</span><span class="w"> 	</span><span class="n">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">boolean</span><span class="w"> 				</span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">double</span><span class="w"> 					</span><span class="n">0</span><span class="p">.</span><span class="na">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">char</span><span class="w"> 					</span><span class="sc">&#39;\u0000&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">引用类型</span><span class="w"> 				 </span><span class="kc">null</span><span class="w">
</span></span></span></code></pre></div><p><code>final</code> 修饰的静态变量，会直接赋值</p>
</li>
<li>
<p>解析：将常量池中的符号引用替换成指向内存的直接引用</p>
<p><code>cp_info #6</code> 转为 <code>public class java.lang.Object @0x00000007c0000f28</code></p>
</li>
</ol>


<h4 class="relative group">初始化 
    <div id="%E5%88%9D%E5%A7%8B%E5%8C%96" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%88%9D%E5%A7%8B%E5%8C%96" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>执行静态代码块中的代码（字节码文件中<strong>clinit</strong>部分），并为静态变量赋值</p>
<p><strong>clinit</strong> 方法中执行顺序和 Java 中的顺序一致</p>
<p><strong>会导致类的初始化：</strong></p>
<ul>
<li>访问一个类的静态变量/静态方法</li>
<li>调用<strong>Class.forName(String className)</strong></li>
<li><strong>new</strong> 一个该类的对象</li>
<li>执行<strong>Main</strong>方法的当前类</li>
<li>子类初始化会导致父类初始化，访问父类的静态变量，只初始化父类</li>
<li>变量是<strong>final</strong>修饰的且赋值的内容需要执行指令才能得出结果时</li>
</ul>
<p>不会导致类初始化：</p>
<ul>
<li>数组的创建不会导致元素的类进行初始化</li>
<li>变量是<strong>final</strong>修饰的且等于常量的不会触发初始化（连接阶段）</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">other</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">jvm</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;A&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">jvm</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">jvm</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w">  </span><span class="nf">jvm</span><span class="p">(){</span><span class="w">              </span><span class="c1">// 构造函数——优先级3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;B&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">{</span><span class="w">                           </span><span class="c1">// 构造代码块--会被放到构造函数中去，优先于构造函数——优先级2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;C&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">static</span><span class="p">{</span><span class="w">                     </span><span class="c1">// 静态代码块——只执行一次，优先级1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;D&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// DACBCB</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// 只会初始化一次--D</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// A -- 构造 CB</span><span class="w">
</span></span></span></code></pre></div><p><strong>特定情况下clinit不会出现：</strong></p>
<ul>
<li>无静态代码块且无静态变量赋值语句</li>
<li>有静态变量声明，无赋值</li>
<li>静态变量定义使用了<strong>final</strong></li>
</ul>
<p><strong>代码块执行顺序</strong>：</p>
<ol>
<li>静态代码块</li>
<li>构造代码块</li>
<li>构造函数</li>
<li>父类先执行</li>
</ol>


<h3 class="relative group">2.类加载器 
    <div id="2%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>类加载器是Java虚拟机提供给应用程序去实现获取类和接口字节码数据的技术</p>
<p>本地接口 <strong>JNI</strong>，允许Java调用其它语言编写的方法。在Hotpot类加载中，主要用于调用Java虚拟机中的方法，这些方法使用C++编写。</p>


<h4 class="relative group">1）类加载器的分类 
    <div id="1%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E7%9A%84%E5%88%86%E7%B1%BB" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E7%9A%84%E5%88%86%E7%B1%BB" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>JDK8 及之前：</p>
<ul>
<li>
<p>使用 Java 实现</p>
<blockquote>
<p>拓展类加载器Extension：允许拓展Java中比较通用的类</p>
<p>应用程序类加载器Application：加载应用使用的类</p>
</blockquote>
</li>
<li>
<p>使用 JVM 底层源码实现(C++)</p>
<blockquote>
<p>启动类加载器Bootstrap：加载Java中最核心的类</p>
</blockquote>
</li>
<li>
<p>自定义类加载器</p>
</li>
</ul>


<h4 class="relative group">2）启动类加载器 
    <div id="2%E5%90%AF%E5%8A%A8%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2%E5%90%AF%E5%8A%A8%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>默认加载 /jre/lib 下的类文件，如 rt.jar tools.jar 等</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">ClassLoader</span><span class="w"> </span><span class="n">classLoader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getClassLoader</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">classLoader</span><span class="p">);</span><span class="w">	</span><span class="c1">// null, 无法获取到启动类加载器</span><span class="w">
</span></span></span></code></pre></div><p>通过启动类加载器加载用户jar包：</p>
<ul>
<li>放到目录下（不推荐）</li>
<li>使用参数进行拓展    <font color=Red><code>-Xbootclasspath/a:jar包目录/jar包名称</code></font></li>
</ul>


<h4 class="relative group">3）拓展类加载器和应用程序类加载器 
    <div id="3%E6%8B%93%E5%B1%95%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%92%8C%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#3%E6%8B%93%E5%B1%95%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%92%8C%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h4>
<ul>
<li>都位于 <code>sun.misc.Launcher</code>  中，是静态内部类。继承自URLClassLoader。</li>
</ul>
<ol>
<li>


<h5 class="relative group"><strong>拓展类加载器</strong> 
    <div id="%E6%8B%93%E5%B1%95%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E6%8B%93%E5%B1%95%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h5>
<blockquote>
<p>默认加载 /jre/lib/ext 下的类文件</p>
</blockquote>
</li>
</ol>
<p>​	加载用户jar包：</p>
<ul>
<li>
<p>放入文件夹</p>
</li>
<li>
<p>使用参数拓展  <font color=Red><code>-Djava.ext.dirs=&quot;jar包目录1;目录2&quot;</code> </font>   <code>;</code> (windows使用 <code>;</code> 来追加) <code>:</code>(macos/linux 使用  <code>: </code> 追加)</p>
</li>
</ul>
<ol start="2">
<li>
<p><strong>应用程序类加载器</strong></p>
<blockquote>
<p>加载 classpath 下的类文件</p>
</blockquote>
</li>
</ol>
<p>​	加载用户jar包：</p>
<ul>
<li>放入文件夹</li>
<li>使用参数拓展  <font color=Red><code>-Djava.ext.dirs=&quot;jar包目录&quot;</code> </font>   <code>;</code> (windows使用 <code>;</code> 来追加) <code>:</code>(macos/linux 使用  <code>: </code> 追加)</li>
</ul>


<h4 class="relative group">4）双亲委派机制 
    <div id="4%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#4%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>每个类加载器会先<strong>检查是否已经加载了该类</strong>，若已加载会直接返回，否则会<strong>将加载请求委派给父类加载器</strong>。最终会检查能否加载（在不在加载目录之下）。第二次加载也是向上查找自己有没有加载，没有就继续委派给父类加载。</p>
<p>面试题：</p>
<ol>
<li>String类会被覆盖吗？ 不会，会被启动类加载器加载原来的 java.lang.String 类，之后加载到自定义的 java.lang.String 类时，会发现已经加载过了。</li>
<li>双亲委派机制的作用：
<ul>
<li>保证类加载的安全性</li>
<li>避免重复加载</li>
</ul>
</li>
</ol>
<p>使用代码主动加载一个类：</p>
<ul>
<li>使用Class.forName方法，使用当前类的类加载器去加载指定的类</li>
<li>获取到类加载器，通过类加载器的loadClass方法指定某个类加载器加载</li>
</ul>
<p>每个类加载器中都保存了一个成员变量：父类加载器（上级而非继承）</p>
<p><code>private final ClassLoader parent;</code></p>
<ul>
<li>启动类加载器是C++编写，无父类加载器</li>
<li>应用程序类加载器：拓展类加载器</li>
<li>拓展类加载器：null，但还是<strong>会将启动任务提交给启动类加载器</strong></li>
</ul>
<p>使用Arthas的 <code>classloader -t</code> 可以显示该树型结构</p>
<pre tabindex="0"><code class="language-+-BootstrapClassLoader" data-lang="+-BootstrapClassLoader">+-BootstrapClassLoader
+-jdk.internal.loader.ClassLoaders$PlatformClassLoader@3d16d686
  +-com.taobao.arthas.agent.ArthasClassloader@9aea133
  +-jdk.internal.loader.ClassLoaders$AppClassLoader@1d44bcfa
</code></pre>

<h4 class="relative group">5）打破双亲委派机制 
    <div id="5%E6%89%93%E7%A0%B4%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#5%E6%89%93%E7%A0%B4%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6" aria-label="锚点">#</a>
    </span>        
    
</h4>


<h5 class="relative group">A. 自定义类加载器 
    <div id="a-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#a-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h5>
<p>Tomcat 使用自定义类加载器来实现应用之间类的隔离。每一个应用会有一个独立的类加载器加载对应的类。</p>
<p>ClassLoader 中的四个核心方法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// 类加载的入口，提供了双亲委派机制。内部会调用findClass</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="n">Class</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">loadClass</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// 由子类实现，获取二进制数据调用defineClass</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">protected</span><span class="w"> </span><span class="n">Class</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">findClass</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// 做类名校验(java.开头的包必须由启动类加载，否则报错)，调用JVM底层方法将字节码信息加载到虚拟机内存中</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">protected</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Class</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">defineClass</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="kt">byte</span><span class="o">[]</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">off</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// 执行类的连接阶段</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">protected</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">resolveClass</span><span class="p">(</span><span class="n">Class</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Class</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">findLoadedClass</span><span class="p">(</span><span class="n">name</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">parent</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parent</span><span class="p">.</span><span class="na">loadClass</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">findBootstrapClassOrNull</span><span class="p">(</span><span class="n">name</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="c1">// 自己加载</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>自定义加载器的<strong>默认 parent 为启动类加载器</strong></p>
<p><strong>不同类加载器加载的同名类不是同一个类</strong></p>
<p>一般不打破双亲委派机制：<strong>重写 findClass 方法</strong></p>


<h5 class="relative group">B. 线程上下文类加载器 
    <div id="b-%E7%BA%BF%E7%A8%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#b-%E7%BA%BF%E7%A8%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h5>
<p>JDBC使用了DriverManager 类由启动类加载器加载，但是他加载引入的jar包由（委派给）应用程序类加载器加载（打破了双亲委派机制）；另一种说法：JDBC通过初始化阶段触发了驱动类的加载，类的加载依然遵循双亲委派机制（因为没有重写loadClass方法）</p>
<p>SPI机制：使用了线程上下文中保存的类加载器进行类的加载，这个类一般是应用程序类加载器</p>
<ol>
<li>在类路径下的META-INF/services  文件夹中，以接口的全限定名来命名文件名，对应的文件里面写该接口的实现。</li>
<li>使用 ServiceLoader 加载该类</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@CallerSensitive</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">S</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ServiceLoader</span><span class="o">&lt;</span><span class="n">S</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="n">Class</span><span class="o">&lt;</span><span class="n">S</span><span class="o">&gt;</span><span class="w"> </span><span class="n">service</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">ClassLoader</span><span class="w"> </span><span class="n">cl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getContextClassLoader</span><span class="p">();</span><span class="c1">// 也可以set为目标加载器</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ServiceLoader</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">Reflection</span><span class="p">.</span><span class="na">getCallerClass</span><span class="p">(),</span><span class="w"> </span><span class="n">service</span><span class="p">,</span><span class="w"> </span><span class="n">cl</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div>

<h5 class="relative group">C. Osgi框架的类加载器 
    <div id="c-osgi%E6%A1%86%E6%9E%B6%E7%9A%84%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#c-osgi%E6%A1%86%E6%9E%B6%E7%9A%84%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h5>
<p>存在同级之间的类加载器的委托加载。还实现了热部署的功能</p>


<h4 class="relative group">6）JDK9之后的类加载器 
    <div id="6jdk9%E4%B9%8B%E5%90%8E%E7%9A%84%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#6jdk9%E4%B9%8B%E5%90%8E%E7%9A%84%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>引入了模块的概念</p>
<ol>
<li>启动类加载器使用 Java 编写，位于jdk.internal.loader.ClassLoader 类中。BootStrap继承自URLClassLoader&ndash;&gt;BootClassLoader继承自 BuiltinClassLoader [实现从模块中找到要加载的字节码资源文件]。<font color=Red>启动类加载器依然无法获取到，返回null</font></li>
<li>扩展类加载器被替换为平台类加载器（Platform Class Loader）。遵循模块化方式加载字节码文件，继承变为BuiltinClassLoader 。平台类加载器的存在更多是为了与老版本的设计方案兼容，自身没有特殊的逻辑</li>
</ol>


<h2 class="relative group">四、运行时数据区域 
    <div id="%E5%9B%9B%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%9B%9B%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F" aria-label="锚点">#</a>
    </span>        
    
</h2>
<p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/%E9%9D%A2%E8%AF%95-1.png" alt="" />
      
    </figure>
</p>


<h3 class="relative group">1.划分 
    <div id="1%E5%88%92%E5%88%86" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1%E5%88%92%E5%88%86" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>线程不共享：程序计数器、Java 虚拟机栈、本地方法栈</p>
<p>线程共享：方法区、堆</p>


<h3 class="relative group">2.PC 
    <div id="2pc" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2pc" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>PC寄存器，每个线程会通过PC记录当前要执行的字节码指令的地址</p>


<h3 class="relative group">3.JVM栈 
    <div id="3jvm%E6%A0%88" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#3jvm%E6%A0%88" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>每个方法的调用使用一个栈帧保存。Java 虚拟机栈<strong>随着线程的创建而创建</strong>，在线程销毁时回收。</p>
<p>栈帧组成：</p>
<ul>
<li>
<p><strong>局部变量表</strong> &mdash;- 在方法执行过程中存放所有的局部变量。编译为字节码文件时就可以确定局部变量表的内容</p>
<blockquote>
<p>是一个数组，每一个位置称为槽（slot），long 和 double 占两个槽，其它类型占一个槽</p>
<p>保存：实例方法的 this 对象，方法参数，方法体中声明的局部变量</p>
<p>为了节省空间，局部变量表的槽<font color=Red>可以复用</font>，一旦某个局部变量不再生效，当前槽就可以再次被使用</p>
</blockquote>
</li>
<li>
<p><strong>操作数栈</strong> &mdash;- 虚拟机在执行指令过程中用来存放临时数据的区域</p>
<blockquote>
<p>在<font color=Red>编译期</font>就可以确定操作数栈的最大深度，从而在执行时分配正确的内存大小</p>
</blockquote>
</li>
<li>
<p><strong>帧数据</strong> &mdash;- 主要包含动态链接、方法出口、异常表的引用</p>
<blockquote>
<p>当前类的字节码指令引用了其他类的属性或者方法时，需要将符号引用（编号）转为对应的运行时常量池中的内存地址。动态链接保存了编号到内存地址的映射关系。</p>
<p>方法在正确或异常结束时，当前栈帧会被弹出，同时PC应该指向上一个栈帧中的下一条指令</p>
<p>异常的处理信息，包含了 try 代码块和 catch 代码块执行后跳转到的字节码指令位置</p>
</blockquote>
</li>
</ul>
<p><strong>栈溢出(StackOverflowError)</strong>：</p>
<p>若不指定栈大小，JVM 将创建一个默认大小[取决于OS和体系结构]的栈</p>
<table>
<thead>
<tr>
<th style="text-align:center">Windows</th>
<th style="text-align:center">Linux</th>
<th style="text-align:center">BSD</th>
<th style="text-align:center">Solaris</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">基于OS默认值</td>
<td style="text-align:center">x86(64位): 1MB  ppc:2MB</td>
<td style="text-align:center">x86(64位):1MB</td>
<td style="text-align:center">64位:1MB</td>
</tr>
</tbody>
</table>
<p><strong>虚拟机参数</strong> <code>-Xss栈大小[单位]</code>  默认字节（必须1024倍数）、k或K(KB)、m或M(MB)、g或G(GB)</p>
<p>或者 <code>-XX:ThreadStackSize=1024</code> 也可以设置</p>
<p>$HotSpot JVM$ 要求： $180K &lt; 栈内存 &lt; 1024M$ 可以设置为 $256K$ 节省内存</p>


<h3 class="relative group">4.本地方法栈 
    <div id="4%E6%9C%AC%E5%9C%B0%E6%96%B9%E6%B3%95%E6%A0%88" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#4%E6%9C%AC%E5%9C%B0%E6%96%B9%E6%B3%95%E6%A0%88" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>存储 <code>native</code> 本地方法的栈帧。在 $HotSpot JVM$ 中，虚拟机栈和本地方法栈<font color=Red>实现上使用了同一个栈空间</font>。本地方法栈会在栈内存上生成一个栈帧，临时保存方法的参数，同时方便异常时把本地方法的栈信息打印出来。</p>


<h3 class="relative group">5.堆 
    <div id="5%E5%A0%86" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#5%E5%A0%86" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>创建的对象都存在堆上。堆内存一般最大。</p>
<p>栈的局部变量表中，可以存放堆上对象的引用。静态变量也可以存放堆对象的引用，通过静态变量可以实现线程之间的共享。</p>
<p><strong>堆溢出(OutOfMemoryError)</strong>：默认的堆内存比较大，并不是used=max=total时才溢出（与垃圾回收有关）</p>
<p>堆空间：Used &ndash; 已使用的内存、Total &ndash; 已分配的可用内存、Max &ndash; JVM可以分配的最堆内存</p>
<p>Arthas：<code>dashboard -i [刷新频率（毫秒）]</code> 指令或者 <code>memory</code> 指令可以查看</p>
<p>不设置任何参数，默认分配<font color=Blue>系统内存的1/4</font>，total 默认 <font color=Blue>1/16</font></p>
<p>设置参数：<code>-Xmx值  -Xms值</code> 分别设置 max 最大值（$&gt; 2MB$）和初始的 total（$&gt; 1MB$）。一般设置 max=total，减少了申请的开销。也不会将 total 收缩。</p>
<p>获取到的值不一样是因为使用了JMX技术内存获取方式（与垃圾回收相关），计算的是可以分配对象的内存，部署整个内存</p>


<h3 class="relative group">6.方法区 
    <div id="6%E6%96%B9%E6%B3%95%E5%8C%BA" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#6%E6%96%B9%E6%B3%95%E5%8C%BA" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>元信息、运行时常量池、字符串常量池</p>
<p>JDK7及之前：放在堆区的 <code>永久代空间（ps_perm_gen）</code>   <code>-XX =:MaxPermSize=值</code></p>
<p>JDK8及之后：<code>元空间（metaspace）</code> ，位于OS维护的直接内存中，默认情况下只有不超过OS承受上限，可以一直分配</p>
<p><font color=Red>-XX:MaxMetaspaceSize=值</font> 将设置元空间最大值，推荐256M</p>


<h4 class="relative group">1）元信息 
    <div id="1%E5%85%83%E4%BF%A1%E6%81%AF" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1%E5%85%83%E4%BF%A1%E6%81%AF" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>存储每个类的基本信息。一般称为 InstanceKlass 对象。在类的加载阶段完成。</p>


<h4 class="relative group">2）运行时常量池 
    <div id="2%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>当常量池加载到内存中之后，可以通过内存地址快速定位到常量池中的内容，这种常量池为运行时常量池。</p>
<p>静态常量池 $&mdash;加载、连接&mdash;&gt;$ 运行时常量池</p>
<p><strong>ByteBuddy框架：</strong></p>
<ol>
<li>
<p>引入依赖</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>net.bytebuddy<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>byte-buddy<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>1.12.23<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>创建ClassWriter对象</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">ClassWriter</span><span class="w"> </span><span class="n">classWriter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ClassWriter</span><span class="p">(</span><span class="n">0</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></div></li>
<li>
<p>调用visit方法，创建字节码数据</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">classWriter</span><span class="p">.</span><span class="na">visit</span><span class="p">(</span><span class="n">Opcodes</span><span class="p">.</span><span class="na">V1_8</span><span class="p">,</span><span class="w"> </span><span class="n">Opcodes</span><span class="p">.</span><span class="na">ACC_PUBLIC</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="s">&#34;java/lang/Object&#34;</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">byte</span><span class="o">[]</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">classWriter</span><span class="p">.</span><span class="na">toByteArray</span><span class="p">();</span><span class="w">
</span></span></span></code></pre></div></li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">368974
</span></span><span class="line"><span class="cl">Exception in thread <span class="s2">&#34;main&#34;</span> java.lang.OutOfMemoryError: Metaspace
</span></span><span class="line"><span class="cl">	at java.base/java.lang.ClassLoader.defineClass1(Native Method)
</span></span><span class="line"><span class="cl">	at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1017)
</span></span><span class="line"><span class="cl">	at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:878)
</span></span><span class="line"><span class="cl">	at com.tcmatj.bytebuddytest.Demo.Demo1.main(Demo1.java:19)
</span></span></code></pre></div>

<h4 class="relative group">3）字符串常量池 
    <div id="3%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E9%87%8F%E6%B1%A0" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#3%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E9%87%8F%E6%B1%A0" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>存储在代码中定义的常量字符串内容。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">&#34;abc&#34;</span><span class="p">);</span><span class="w">		</span><span class="c1">// 编译后 &#34;abc&#34; 加载到静态常量池中</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        									</span><span class="c1">// 读取到内存后，自动加载到字符串常量池</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        									</span><span class="c1">// new 创建的对象会放到堆内存。所以 s1 指向堆中的 &#34;abc&#34; 对象</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;abc&#34;</span><span class="p">;</span><span class="w">					</span><span class="c1">// 指向字符串常量池中的 &#34;abc&#34; </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">s1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">s2</span><span class="p">);</span><span class="w">       </span><span class="c1">// false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">s1</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">s2</span><span class="p">));</span><span class="w">  </span><span class="c1">// true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>JDK7之前：存于永久代</p>
<p>JDK7：堆</p>
<p>JDK7之后：堆</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test1</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;a&#34;</span><span class="p">;</span><span class="w">					</span><span class="c1">// 常量池</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;c&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">s3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;ac&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">s4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s2</span><span class="p">;</span><span class="w">				</span><span class="c1">// 底层实现调用了new，指向新的字符串对象</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">s5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;a&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;c&#34;</span><span class="p">;</span><span class="w">				</span><span class="c1">// 指向常量池中 &#34;ac&#34; </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">s4</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">s3</span><span class="p">);</span><span class="w">       </span><span class="c1">// false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">s5</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">s3</span><span class="p">);</span><span class="w">       </span><span class="c1">// true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">s4</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">s3</span><span class="p">));</span><span class="w">  </span><span class="c1">// true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p><code>String.intern() </code> 可以手动将字符串放入字符串常量池中</p>
<ul>
<li>
<p>JDK6及之前，会将第一次遇到的字符串复制到常量池中，返回指向常量池的地址</p>
</li>
<li>
<p>JDK7之后，会把第一次遇到的字符串的<font color=Red><strong>引用</strong></font>放入字符串常量池，返回指向常量池的地址</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test2</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 不使用new String是会把这个值直接返到常量池</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StringBuilder</span><span class="p">().</span><span class="na">append</span><span class="p">(</span><span class="s">&#34;think&#34;</span><span class="p">).</span><span class="na">append</span><span class="p">(</span><span class="s">&#34;123&#34;</span><span class="p">).</span><span class="na">toString</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StringBuilder</span><span class="p">().</span><span class="na">append</span><span class="p">(</span><span class="s">&#34;nu&#34;</span><span class="p">).</span><span class="na">append</span><span class="p">(</span><span class="s">&#34;ll&#34;</span><span class="p">).</span><span class="na">toString</span><span class="p">();</span><span class="w"> </span><span class="c1">// &#34;null&#34; 会默认放入常量池</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        										</span><span class="c1">// JDK6		JDK8	 </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">s1</span><span class="p">.</span><span class="na">intern</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">s1</span><span class="p">);</span><span class="w">	</span><span class="c1">// false	true	  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">s2</span><span class="p">.</span><span class="na">intern</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">s2</span><span class="p">);</span><span class="w">	</span><span class="c1">// false	false	  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kt">char</span><span class="o">[]</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="sc">&#39;a&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;s&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;d&#39;</span><span class="p">};</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;asd&#34;</span><span class="p">;</span><span class="w">                       </span><span class="c1">// 常量池</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">&#34;asd&#34;</span><span class="p">);</span><span class="w">   		</span><span class="c1">// 堆</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="n">f</span><span class="p">);</span><span class="w">               </span><span class="c1">// 堆 		 数组形式new</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="n">f</span><span class="p">).</span><span class="na">intern</span><span class="p">();</span><span class="w">      </span><span class="c1">// 常量池 		数组形式new，使用intern方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">b2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">&#34;asd&#34;</span><span class="p">).</span><span class="na">intern</span><span class="p">();</span><span class="w"> </span><span class="c1">// 常量池</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div></li>
</ul>


<h3 class="relative group">7.直接内存 
    <div id="7%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#7%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>不在 JVM 规范中，不属于 Java 运行时的内存区域。</p>
<p>在 JDK 1.4 引入 NIO 机制，使用了直接内存，解决：</p>
<ul>
<li>Java 堆中对象回收时会影响对象的创建和使用</li>
<li>提升IO操作的效率。把文件读入直接内存（缓冲区）再把数据复制到 Java 堆中。现在可以直接引用直接内存，只需要保存一个对象引用，减少了复制数据的开销。</li>
</ul>
<p>内存溢出： <code>OutOfMemoryError: Direct buffer memory</code></p>
<p>​					<strong><code>-XX:MaxDirctMemorySize=值</code></strong></p>
<p>创建直接内存上的数据：<strong>ByteBuffer</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">ByteBuffer</span><span class="w"> </span><span class="n">directBuffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ByteBuffer</span><span class="p">.</span><span class="na">allocateDirect</span><span class="p">(</span><span class="n">size</span><span class="p">);</span><span class="w">		</span><span class="c1">// 分配内存空间</span><span class="w">
</span></span></span></code></pre></div><p>
    <figure>
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /img/JVM-1_huc0aeacb5de676189968ad93140773ee1_69677_330x0_resize_box_3.png 330w,
        /img/JVM-1_huc0aeacb5de676189968ad93140773ee1_69677_660x0_resize_box_3.png 660w,
        /img/JVM-1_huc0aeacb5de676189968ad93140773ee1_69677_1024x0_resize_box_3.png 1024w,
        /img/JVM-1_huc0aeacb5de676189968ad93140773ee1_69677_1320x0_resize_box_3.png 2x"
        src="/img/JVM-1_huc0aeacb5de676189968ad93140773ee1_69677_660x0_resize_box_3.png"
        alt=""
      />
      
    </figure>
</p>


<h2 class="relative group">五、垃圾回收器 
    <div id="%E4%BA%94%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E4%BA%94%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h2>
<p><strong>内存泄漏</strong>指的是不再使用的对象在系统中未被回收，内存泄漏的积累可能会导致<strong>内存溢出</strong>。</p>
<p><strong>垃圾回收器</strong>主要负责堆上的内存回收</p>
<ul>
<li>解决系统僵死的问题</li>
<li>性能优化</li>
</ul>
<p>自动垃圾回收：</p>
<ul>
<li><font color=Green>降低程序员实现难度、降低对象回收bug的可能性</font></li>
<li><font color=Orange>程序员无法控制内存回收的及时性</font></li>
</ul>
<p>手动垃圾回收：</p>
<ul>
<li><font color=Green>回收及时性高，由程序员把控回收的时机</font></li>
<li><font color=Orange>编写不当容易出现悬空指针、重复释放、内存泄漏等问题</font></li>
</ul>


<h3 class="relative group">1.方法区的回收-类 
    <div id="1%E6%96%B9%E6%B3%95%E5%8C%BA%E7%9A%84%E5%9B%9E%E6%94%B6-%E7%B1%BB" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1%E6%96%B9%E6%B3%95%E5%8C%BA%E7%9A%84%E5%9B%9E%E6%94%B6-%E7%B1%BB" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>判断一个类可以被卸载，需要满足：</p>
<ul>
<li><font color=Red>此类的所有实例对象都已被回收，在堆中不存在该类的实例对象以及子类对象</font></li>
<li><font color=Red>加载该类的类加载器已被回收</font></li>
<li><font color=Red>该类对应的 java.lang.Class 对象没有在任何地方被引用</font></li>
</ul>
<p>手动触发回收：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">System</span><span class="p">.</span><span class="na">gc</span><span class="p">();</span><span class="w"> </span><span class="c1">//不一定会立即回收垃圾，只是发一个请求</span><span class="w">
</span></span></span></code></pre></div><p>开发环境中此场景较少。在 JSP 热部署等应用场景中，每个 jsp 文件对应唯一的类加载器，当一个 jsp 文件修改了，就直接卸载这个 jsp 类加载器。重新创建类加载器，重新加载 jsp 文件</p>


<h3 class="relative group">2.堆回收-对象 
    <div id="2%E5%A0%86%E5%9B%9E%E6%94%B6-%E5%AF%B9%E8%B1%A1" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2%E5%A0%86%E5%9B%9E%E6%94%B6-%E5%AF%B9%E8%B1%A1" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>Java 对象是否能被回收，是根据对象是否被引用来决定（不可达的对象也会被回收）</p>
<p>栈帧中，局部变量表保存 new 出来对象的 <strong>引用</strong></p>


<h4 class="relative group">1）引用计数法（Java未使用） 
    <div id="1%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%E6%B3%95java%E6%9C%AA%E4%BD%BF%E7%94%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%E6%B3%95java%E6%9C%AA%E4%BD%BF%E7%94%A8" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>维护一个引用计数器，对象被引用时 +1 ，取消引用时 -1</p>
<ul>
<li>实现简单</li>
<li>维护指针的开销</li>
<li><font color=Red>循环引用无法回收</font></li>
</ul>
<p>虚拟机参数 ： <code>-verbose:gc</code> 查看垃圾回收</p>


<h4 class="relative group">2）可达性分析法（Java使用） 
    <div id="2%E5%8F%AF%E8%BE%BE%E6%80%A7%E5%88%86%E6%9E%90%E6%B3%95java%E4%BD%BF%E7%94%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2%E5%8F%AF%E8%BE%BE%E6%80%A7%E5%88%86%E6%9E%90%E6%B3%95java%E4%BD%BF%E7%94%A8" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>可达性分析法将对象分为两类：垃圾回收的根对象（GC Root）和普通对象，对象与对象之间存在引用关系。</p>
<p>思想：<strong>若某个对象可以由 GC Root 对象可达，则不可回收</strong></p>
<p><strong>GC Root对象（四大类&ndash;对象都在堆内）</strong>：</p>
<ul>
<li>
<p>线程对象 &mdash;- 引用线程栈帧中的方法参数、局部变量等</p>
<blockquote>
<p>对象指向栈帧</p>
</blockquote>
</li>
<li>
<p>系统类加载器加载的 java.lang.Class 对象 &mdash;- 引用类中的静态变量</p>
</li>
<li>
<p>监视器对象，用来保存同步锁关键字持有的对象</p>
<blockquote>
<p>synchronized(ClassA.class)		// ClassA 对象不可回收</p>
</blockquote>
</li>
<li>
<p>本地方法调用时使用的全局对象</p>
</li>
</ul>
<p>查看：</p>
<ul>
<li>Arthas 	<code>heapdump</code>命令将堆内存快照保存到本地磁盘</li>
<li>MAT 工具打开堆内存快照文件，选择GC Root功能查看所有的GC Root</li>
</ul>


<h3 class="relative group">3.其它引用 
    <div id="3%E5%85%B6%E5%AE%83%E5%BC%95%E7%94%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#3%E5%85%B6%E5%AE%83%E5%BC%95%E7%94%A8" aria-label="锚点">#</a>
    </span>        
    
</h3>


<h4 class="relative group">1.软引用 
    <div id="1%E8%BD%AF%E5%BC%95%E7%94%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1%E8%BD%AF%E5%BC%95%E7%94%A8" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>一个对象只有软引用关联时，程序内存不足就会将软引用的数据回收。常用于缓存，Java 提供了 SoftReference 类来实现软引用</p>
<p>执行过程：</p>
<ul>
<li>使用软引用对象包装起来， <strong>new SoftReference&lt;对象类型&gt;(对象)</strong></li>
<li>内存不足时，VM 尝试进行垃圾回收</li>
<li>仍不能解决问题时，回收软引用中的对象</li>
<li>依然内存不足，抛出 OutOfMemory 异常</li>
</ul>
<p>当软引用对象也需要回收时，如何知道那些要被回收？</p>
<p>队列机制：</p>
<ul>
<li>软引用创建时，通过构造器传入引用队列 <strong>new SoftReference&lt;对象类型&gt;(对象, 引用队列)</strong></li>
<li>在软引用中包含的对象被回收时，该软引用对象会被放入引用队列</li>
<li>通过遍历引用队列，将软引用的强引用删除</li>
</ul>


<h4 class="relative group">2.弱引用 
    <div id="2%E5%BC%B1%E5%BC%95%E7%94%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2%E5%BC%B1%E5%BC%95%E7%94%A8" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>与软引用的区别：弱引用在包含的对象在垃圾回收时，不管内存够不够都会被直接回收。<strong>WeakReference</strong> 类，可以 <code>get()</code> 到包含的对象。主要用在ThreadLocal中使用</p>


<h4 class="relative group">3.虚引用 
    <div id="3%E8%99%9A%E5%BC%95%E7%94%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#3%E8%99%9A%E5%BC%95%E7%94%A8" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>幽灵引用、幻影引用。不能通过虚引用获取到包含的对象。唯一的用途是当对象被垃圾回收时可以接收到对应的通知。 <strong>PhantomReference</strong> 类。直接内存中为了及时知道对象不再使用，使用了虚引用来实现</p>


<h4 class="relative group">4.终结器引用 
    <div id="4%E7%BB%88%E7%BB%93%E5%99%A8%E5%BC%95%E7%94%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#4%E7%BB%88%E7%BB%93%E5%99%A8%E5%BC%95%E7%94%A8" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>对象需要被回收时，对象会被放置在 <strong>Finalizer</strong> 类中的引用队列中，并在稍后由一条 FinalizerThread 线程从队列获取对象，然后执行对象的 finalize 方法。</p>


<h3 class="relative group">4.垃圾回收算法 
    <div id="4%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AE%97%E6%B3%95" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#4%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AE%97%E6%B3%95" aria-label="锚点">#</a>
    </span>        
    
</h3>


<h4 class="relative group">1.评价标准 
    <div id="1%E8%AF%84%E4%BB%B7%E6%A0%87%E5%87%86" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1%E8%AF%84%E4%BB%B7%E6%A0%87%E5%87%86" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>GC线程在部分阶段需要停止所有的用户线程。这个过程称之为 $Stop The World(STW)$。</p>
<ol>
<li>$吞吐量 = \frac{执行用户代码时间}{执行用户代码时间 + GC时间}$，越高，垃圾回收的效率越高</li>
<li>最大暂停时间 $STW_{max}$</li>
<li>堆使用效率&mdash;复制算法会把堆内存一分为二，每次只能利用一半内存</li>
</ol>
<p><strong>上诉三者不可兼得</strong>：一般堆内存越大，最大暂停时间越长。减少最大暂停时间，就会降低吞吐量</p>
<p><font color=Red>不同的垃圾回收算法适用于不同的场景</font></p>


<h4 class="relative group">2.回收算法 
    <div id="2%E5%9B%9E%E6%94%B6%E7%AE%97%E6%B3%95" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2%E5%9B%9E%E6%94%B6%E7%AE%97%E6%B3%95" aria-label="锚点">#</a>
    </span>        
    
</h4>


<h5 class="relative group">a)标记清除算法 
    <div id="a%E6%A0%87%E8%AE%B0%E6%B8%85%E9%99%A4%E7%AE%97%E6%B3%95" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#a%E6%A0%87%E8%AE%B0%E6%B8%85%E9%99%A4%E7%AE%97%E6%B3%95" aria-label="锚点">#</a>
    </span>        
    
</h5>
<p>$Step1$ 标记阶段：将所有存活的对象进行标记。使用可达性分析算法，从 GC Root 开始通过引用链遍历出所有存活对象</p>
<p>$Step2$ 清除阶段：从内存中删除没有被标记的对象</p>
<p>优点：实现简单</p>
<p>缺点：1. 碎片化问题。在对象被删除后，出现很多细小的可用内存单元。</p>
<p>​			2. 分配速度慢。由于存在内存碎片，需要维护一个空闲链表，有可能每次遍历到链表末尾才能获得合适的空间</p>


<h5 class="relative group">b)复制算法 
    <div id="b%E5%A4%8D%E5%88%B6%E7%AE%97%E6%B3%95" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#b%E5%A4%8D%E5%88%B6%E7%AE%97%E6%B3%95" aria-label="锚点">#</a>
    </span>        
    
</h5>
<p>$Step1$ 准备两块 From 空间和 To 空间，每次在对象分配阶段，只能使用其中一块空间（From空间）</p>
<p>$Step2$ 在垃圾回收阶段，将 From 空间中存活对象复制到 To 空间。将两个空间的名字互换</p>
<p>优点：1.吞吐量高。比标记-整理算法少了一次遍历的过程，但是需要进行对象移动</p>
<p>​	        2.不会发生碎片化问题</p>
<p>缺点：内存利用率低</p>


<h5 class="relative group">c)标记-整理算法 
    <div id="c%E6%A0%87%E8%AE%B0-%E6%95%B4%E7%90%86%E7%AE%97%E6%B3%95" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#c%E6%A0%87%E8%AE%B0-%E6%95%B4%E7%90%86%E7%AE%97%E6%B3%95" aria-label="锚点">#</a>
    </span>        
    
</h5>
<p>$Step1$ 标记阶段：将所有存活的对象进行标记。使用可达性分析算法，从 GC Root 开始通过引用链遍历出所有存活对象</p>
<p>$Step2$ 整理阶段：将存活对象移动到堆的一端</p>
<p>优点：1.内存利用率高</p>
<p>​	        2.不会发生碎片化问题</p>
<p>缺点：整理阶段的效率不高</p>


<h5 class="relative group">d)分代垃圾回收算法 
    <div id="d%E5%88%86%E4%BB%A3%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AE%97%E6%B3%95" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#d%E5%88%86%E4%BB%A3%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AE%97%E6%B3%95" aria-label="锚点">#</a>
    </span>        
    
</h5>
<p>将上述GC算法组合使用。将内存划分为年轻代（对象存活时间短）[伊甸园区、幸存者区(2块)]、老年代</p>
<p><code>-XX:+UseSerialGC</code>	使用分代GC</p>
<table>
<thead>
<tr>
<th>-Xms</th>
<th>设置堆的最小和初始大小&gt;=1MB</th>
</tr>
</thead>
<tbody>
<tr>
<td>-Xmx</td>
<td>设置堆的最大大小&gt;=2M</td>
</tr>
<tr>
<td>-Xmn</td>
<td>新生代的大小</td>
</tr>
<tr>
<td>-XX:SurivivorRatio</td>
<td>伊甸园区和幸存者区的比例，默认8:1:1</td>
</tr>
<tr>
<td>-XX:+PrintGCDetails 或 verbose:gc</td>
<td>打印 GC 日志</td>
</tr>
</tbody>
</table>
<p>$Step1$ 创建出来的对象，先放入 <strong>Eden 伊甸园区</strong></p>
<p>$Step2$ 若 Eden 区满，触发年轻代的 GC，称为 <strong>Minor GC</strong> 或者 Young GC。Minor GC 会把需要需要 <strong>Eden 区</strong>中和 <strong>幸存者From区</strong> 需要回收的对象回收，没回收的放入<strong>幸存者To区</strong>。每次<strong>记录年龄</strong>，初始值为0，每次GC后 +1</p>
<p>$Step3$ 年龄到达 15（最大的默认值） 后，对象<strong>晋升到老年代</strong></p>
<p>$Step4$ 老年代满，<strong>先尝试 Minor GC</strong> 还是不足，会<strong>触发 Full GC</strong>，会对整个堆进行垃圾回收。若无法回收掉老年代对象，对象继续放入老年代时，抛出 OutOfMemory 异常</p>


<h3 class="relative group">5.垃圾回收器 
    <div id="5%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#5%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h3>


<h4 class="relative group">1.年轻代-Serial垃圾回收器 
    <div id="1%E5%B9%B4%E8%BD%BB%E4%BB%A3-serial%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1%E5%B9%B4%E8%BD%BB%E4%BB%A3-serial%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h4>
<ul>
<li><strong>单线程</strong></li>
<li><strong>复制算法</strong></li>
<li>单CPU下吞吐量非常出色</li>
<li>多CPU下吞吐量不如其它GC，堆若偏大，会让用户长时间等待</li>
<li>适用于<strong>客户端程序或者硬件配置有限的场景</strong></li>
</ul>


<h4 class="relative group">2.老年代-SerialOld垃圾回收器 
    <div id="2%E8%80%81%E5%B9%B4%E4%BB%A3-serialold%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2%E8%80%81%E5%B9%B4%E4%BB%A3-serialold%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p><code>-XX:+UseSerialGC</code> 	新时代、老年代都会使用串行回收器</p>
<ul>
<li><strong>标记整理算法</strong></li>
<li>单CPU下吞吐量非常出色</li>
<li>多CPU下吞吐量不如其它GC，堆若偏大，会让用户长时间等待</li>
<li><strong>与Serial搭配使用</strong>，或者在CMS特殊情况下使用</li>
</ul>


<h4 class="relative group">3.年轻代-ParNew垃圾回收器 
    <div id="3%E5%B9%B4%E8%BD%BB%E4%BB%A3-parnew%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#3%E5%B9%B4%E8%BD%BB%E4%BB%A3-parnew%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p><code>-XX:UseParNewGC</code> 本质上是对Serial的优化，使用<strong>多线程</strong>进行垃圾回收</p>
<ul>
<li>
<p>年轻代</p>
</li>
<li>
<p><strong>复制算法</strong></p>
</li>
<li>
<p>多CPU下停顿时间较短</p>
</li>
<li>
<p>吞吐量和停顿时间不如G1，JDK9之后不建议使用</p>
</li>
<li>
<p>适用于JDK8及之前，与CMS GC搭配使用</p>
</li>
</ul>


<h4 class="relative group">4.老年代-CMS垃圾回收器 
    <div id="4%E8%80%81%E5%B9%B4%E4%BB%A3-cms%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#4%E8%80%81%E5%B9%B4%E4%BB%A3-cms%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>CMS(Concurrent Mark Sweep) JDK14废弃</p>
<p><code>-XX:UseConcMarkSweepGC</code> 关注于系统的<strong>暂停时间</strong>，允许用户线程和GC线程在某些步骤中同时执行，减少用户线程的等待时间</p>
<ul>
<li>
<p>老年代</p>
</li>
<li>
<p><strong>标记清除算法</strong></p>
</li>
<li>
<p>用户体验好</p>
</li>
<li>
<p>内存碎片化问题</p>
<blockquote>
<p>在Full GC时整理。使用-XX:CMSFullGCsBeforeCompaction=N 来调整N次Full GC后再整理</p>
</blockquote>
</li>
<li>
<p>退化问题&ndash;退化为单线程</p>
<blockquote>
<p>若老年代内存不足，会退化为单线程回收老年代</p>
</blockquote>
</li>
<li>
<p>浮动垃圾问题&ndash;回收不掉</p>
<blockquote>
<p>第四步时，用户新建的不需要的对象，不能立马回收，要等到下次清理</p>
</blockquote>
</li>
<li>
<p>适用于大型系统，用户请求数据量大、频率高的场景</p>
</li>
</ul>
<p>执行步骤：</p>
<p>$Step1$ 初始标记，用极短时间标记处GC Root直接关联到的对象</p>
<p>$Step2$ 并发标记，标记所有的对象，用户线程不需要暂停</p>
<p>$Step3$ 重新标记，第二步可能会发生对象变化，存在错漏等情况</p>
<p>$Step4$ 并发清理，清理死亡的对象，用户线程不需要暂停</p>


<h4 class="relative group">5.年轻代-Parallel Scavenge垃圾回收器 
    <div id="5%E5%B9%B4%E8%BD%BB%E4%BB%A3-parallel-scavenge%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#5%E5%B9%B4%E8%BD%BB%E4%BB%A3-parallel-scavenge%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>JDK8 的默认回收器，多线程并行回收，自动调整堆内内存大小</p>
<ul>
<li><strong>复制算法</strong></li>
<li>吞吐量高，手动可控制吞吐量</li>
<li>会动态调整堆的参数</li>
<li>不能保证单次的停顿时间</li>
<li>适用于后台任务，不需要与用户交互，且容易产生大量对象。如大数据处理，大文件导出</li>
</ul>


<h4 class="relative group">6.老年代-Parallel Old垃圾回收器 
    <div id="6%E8%80%81%E5%B9%B4%E4%BB%A3-parallel-old%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#6%E8%80%81%E5%B9%B4%E4%BB%A3-parallel-old%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p><code>-XX:+UseParallelGC</code> 或 <code>-XX:+UseParallelOldGC</code>  都会使用 PS + PO 的组合。</p>
<p>允许手动设置最大暂停时间和吞吐量，官方建议不要设置堆内存的最大值，GC会根据最大暂停时间和吞吐量自动调整内存大小</p>
<p><code>-XX:MaxGCPauseMillis=n</code> 设置最大停顿毫秒数为n</p>
<p><code>-XX:GCTimeRatio=n</code> 设置吞吐量为n</p>
<p><code>-XX:+UseAdaptiveSizePolicy</code> 设置GC根据吞吐量和最大停顿毫秒数自动调整内存大小，默认开启</p>
<ul>
<li><strong>标记整理算法</strong></li>
<li>并发收集，多核下效率较高</li>
<li>暂停时间较长</li>
<li>与PS配套使用</li>
</ul>


<h4 class="relative group">7.G1(Garbage First)垃圾回收器 
    <div id="7g1garbage-first%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#7g1garbage-first%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>JDK9之后的默认GC</p>
<p><strong>设计目标：</strong></p>
<ol>
<li>支持巨大的堆空间回收，并有较高的吞吐量</li>
<li>支持多CPU并行垃圾回收</li>
<li>允许用户设置最大暂停时间</li>
</ol>
<p>G1之前的GC，内存结构一般是连续的。G1的整个堆会被划分为多个大小相等的区域，称之为区Region，$Region大小 = \frac{堆大小}{2048}$，也可以通过参数 <code>-XX:G1HeapRegionSize=32m</code> 指定，2的指数幂，范围<code>1M-32M</code>。分为Eden、Survivor、Old区，不要求是连续的。</p>
<p><strong>回收方式：</strong></p>
<p>年轻代回收（Young GC）、混合回收（Mixed GC）</p>
<p><strong>年轻代回收：</strong></p>
<p>回收Eden区和Survivor区中不用的对象。会导致STW。<code>-XX:MaxGCPauseMillis=n</code> 默认200，设置每次垃圾回收时的最大暂停时间毫秒数，GC会尽可能地保证暂停时间</p>
<p>执行流程：</p>
<p>$Step1$ 新创建的对象会放在Eden区。当G1判断年轻代不足（占总堆60%），无法分配对象时执行Young GC</p>
<p>$Step2$ 标记Eden和Survivor区中的存活对象</p>
<p>$Step3$ 根据配置的最大暂停时间选择某些区域将存活对象复制到一个新的Survivor区中(年龄+1)，清空这些区域</p>
<pre><code>	  会记录每次GC时平均耗时，作为下次GC的参考，计算最多可以回收多少个Region区域
</code></pre>
<p>$Step4$ Survivor区中存活对象会被搬运到另一个Survivor区</p>
<p>$Step5$ 当某个存活对象的年龄达到阈值（默认15），将被放入老年代</p>
<p>$Note$ 部分对象如果大小超过Region的一半，会直接放入老年代，称为Humongous区（有可能横跨多个Region）。</p>
<p>$Step6$ 多次回收后，会出现很多Old老年代区，此时总堆占有率达到阈值（<code>-XX:InitiatingHeapOccupancyPercent</code> 默认40%）会触发混合回收MixedGC。回收所有年轻代和部分老年代以及大对象。[复制算法]</p>
<p><strong>混合回收：</strong></p>
<p>$Step1$ 初始标记，标记 GC Roots 引用的对象</p>
<p>$Step2$ 并发标记，标记所有的对象，用户线程不需要暂停</p>
<p>$Step3$ 最终标记，标记一些改变、漏标的对象</p>
<p>$Step4$ 并发复制清理，不会产生内存碎片，用户线程不需要暂停</p>
<p>G1对老年代的清理会选择存活度最低的区域来进行回收，可以保证回收效率最高。也是G1名称的由来。</p>
<p><strong>Full GC：</strong></p>
<p>如果清理过程中发现没有足够的空Region存放转移的对象，会出现Full GC。单线程执行标记-整理算法，此时会导致用户线程暂停。所有要尽量保证应该用的堆内存有一定多余的空间。</p>
<p><strong>总结：</strong></p>
<ul>
<li><code>-XX:+UseG1GC</code> JDK9之后默认打开</li>
<li><code>-XX:MaxGCPauseMillis=n</code> 最大暂停毫秒数</li>
<li>复制算法</li>
<li>延迟可控</li>
<li>无内存碎片</li>
<li>并发标记的SATB算法效率高</li>
<li>JDK8之前不够成熟</li>
<li>适用于JDK8最新版本、JDK9之后建议默认使用</li>
</ul>


<h4 class="relative group">8.组合选择 
    <div id="8%E7%BB%84%E5%90%88%E9%80%89%E6%8B%A9" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#8%E7%BB%84%E5%90%88%E9%80%89%E6%8B%A9" aria-label="锚点">#</a>
    </span>        
    
</h4>
<ul>
<li>
<p>JDK8及之前：</p>
<blockquote>
<p>ParNew + CMS（关注暂停时间）</p>
<p>Parallel Scavenge + Parallel Old（关注吞吐量）</p>
<p>G1（JDK8之前不建议，较大堆[&gt;6G]并且关注暂停时间）</p>
</blockquote>
</li>
<li>
<p>JDK9之后</p>
<blockquote>
<p>G1</p>
</blockquote>
</li>
</ul>


<h2 class="relative group">六、其他 
    <div id="%E5%85%AD%E5%85%B6%E4%BB%96" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E5%85%AD%E5%85%B6%E4%BB%96" aria-label="锚点">#</a>
    </span>        
    
</h2>


<h3 class="relative group">1. GC调优思路 
    <div id="1-gc%E8%B0%83%E4%BC%98%E6%80%9D%E8%B7%AF" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1-gc%E8%B0%83%E4%BC%98%E6%80%9D%E8%B7%AF" aria-label="锚点">#</a>
    </span>        
    
</h3>
<ol>
<li>理解需求和问题，确定调优目标</li>
<li>定位具体的问题，确定是否真的有GC调优的必要</li>
<li>确定是 <code>Minor GC</code> 还是 <code>Mixed GC</code></li>
<li>分析具体调整的参数、软硬件配置
G1：</li>
</ol>
<ul>
<li>新生代 并行复制算法，有STW</li>
<li>老年代 并发标记整理</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">-</span><span class="n">XX</span><span class="p">:</span><span class="o">+</span><span class="n">PrintGCDetails</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">-</span><span class="n">XX</span><span class="p">:</span><span class="o">+</span><span class="n">PrintGCDateStamps</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">-</span><span class="n">XX</span><span class="p">:</span><span class="o">+</span><span class="n">PrintAdaptiveSizePolicy</span><span class="w"> </span><span class="c1">// 打印G1 Ergonomics相关信息</span><span class="w">
</span></span></span></code></pre></div><p>G1 调优的一个基本建议就是避免进行大量的 Humongous 对象分配，如果 Ergonomics 信息说明发生了这一点，那么就可以考虑要么增大堆的大小，要么直接将 region 大小提高</p>


<h1 class="relative group">Arthas 
    <div id="arthas" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#arthas" aria-label="锚点">#</a>
    </span>        
    
</h1>


<h2 class="relative group">1.下载与启动 
    <div id="1%E4%B8%8B%E8%BD%BD%E4%B8%8E%E5%90%AF%E5%8A%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1%E4%B8%8B%E8%BD%BD%E4%B8%8E%E5%90%AF%E5%8A%A8" aria-label="锚点">#</a>
    </span>        
    
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl -O https://arthas.aliyun.com/arthas-boot.jar
</span></span><span class="line"><span class="cl">java -jar arthas-boot.jar
</span></span></code></pre></div><p>选择应用 java 进程序号后回车</p>


<h2 class="relative group">2.退出 
    <div id="2%E9%80%80%E5%87%BA" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2%E9%80%80%E5%87%BA" aria-label="锚点">#</a>
    </span>        
    
</h2>
<p>退出当前的连接，可以用 <code>quit</code> 或者 <code>exit</code></p>
<p>完全退出 <code>arthas</code>，可以执行 <code>stop </code>命令</p>


<h2 class="relative group">3.命令列表 
    <div id="3%E5%91%BD%E4%BB%A4%E5%88%97%E8%A1%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#3%E5%91%BD%E4%BB%A4%E5%88%97%E8%A1%A8" aria-label="锚点">#</a>
    </span>        
    
</h2>
<p><code>dump -d [目标目录] [全类名]</code> 命令：将已加载类的字节码文件保存到特定目录</p>
<p><code>jad [全类名]</code> ：反编译已加载类的源码</p>


<h3 class="relative group"><a href="https://arthas.aliyun.com/doc/commands.html#jvm-%e7%9b%b8%e5%85%b3" target="_blank">#</a>jvm 相关 
    <div id="httpsarthasaliyuncomdoccommandshtmljvm-%E7%9B%B8%E5%85%B3jvm-%E7%9B%B8%E5%85%B3" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#httpsarthasaliyuncomdoccommandshtmljvm-%E7%9B%B8%E5%85%B3jvm-%E7%9B%B8%E5%85%B3" aria-label="锚点">#</a>
    </span>        
    
</h3>
<ul>
<li><a href="https://arthas.aliyun.com/doc/dashboard.html" target="_blank">dashboard</a> - 当前系统的实时数据面板</li>
<li><a href="https://arthas.aliyun.com/doc/getstatic.html" target="_blank">getstatic</a> - 查看类的静态属性</li>
<li><a href="https://arthas.aliyun.com/doc/heapdump.html" target="_blank">heapdump</a> - dump java heap, 类似 jmap 命令的 heap dump 功能</li>
<li><a href="https://arthas.aliyun.com/doc/jvm.html" target="_blank">jvm</a> - 查看当前 JVM 的信息</li>
<li><a href="https://arthas.aliyun.com/doc/logger.html" target="_blank">logger</a> - 查看和修改 logger</li>
<li><a href="https://arthas.aliyun.com/doc/mbean.html" target="_blank">mbean</a> - 查看 Mbean 的信息</li>
<li><a href="https://arthas.aliyun.com/doc/memory.html" target="_blank">memory</a> - 查看 JVM 的内存信息</li>
<li><a href="https://arthas.aliyun.com/doc/ognl.html" target="_blank">ognl</a> - 执行 ognl 表达式</li>
<li><a href="https://arthas.aliyun.com/doc/perfcounter.html" target="_blank">perfcounter</a> - 查看当前 JVM 的 Perf Counter 信息</li>
<li><a href="https://arthas.aliyun.com/doc/sysenv.html" target="_blank">sysenv</a> - 查看 JVM 的环境变量</li>
<li><a href="https://arthas.aliyun.com/doc/sysprop.html" target="_blank">sysprop</a> - 查看和修改 JVM 的系统属性</li>
<li><a href="https://arthas.aliyun.com/doc/thread.html" target="_blank">thread</a> - 查看当前 JVM 的线程堆栈信息</li>
<li><a href="https://arthas.aliyun.com/doc/vmoption.html" target="_blank">vmoption</a> - 查看和修改 JVM 里诊断相关的 option</li>
<li><a href="https://arthas.aliyun.com/doc/vmtool.html" target="_blank">vmtool</a> - 从 jvm 里查询对象，执行 forceGc</li>
</ul>


<h3 class="relative group"><a href="https://arthas.aliyun.com/doc/commands.html#class-classloader-%e7%9b%b8%e5%85%b3" target="_blank">#</a>class/classloader 相关 
    <div id="httpsarthasaliyuncomdoccommandshtmlclass-classloader-%E7%9B%B8%E5%85%B3classclassloader-%E7%9B%B8%E5%85%B3" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#httpsarthasaliyuncomdoccommandshtmlclass-classloader-%E7%9B%B8%E5%85%B3classclassloader-%E7%9B%B8%E5%85%B3" aria-label="锚点">#</a>
    </span>        
    
</h3>
<ul>
<li><a href="https://arthas.aliyun.com/doc/classloader.html" target="_blank">classloader</a> - 查看 classloader 的继承树，urls，类加载信息，使用 classloader 去 getResource</li>
<li><a href="https://arthas.aliyun.com/doc/dump.html" target="_blank">dump</a> - dump 已加载类的 byte code 到特定目录</li>
<li><a href="https://arthas.aliyun.com/doc/jad.html" target="_blank">jad</a> - 反编译指定已加载类的源码</li>
<li><a href="https://arthas.aliyun.com/doc/mc.html" target="_blank">mc</a> - 内存编译器，内存编译<code>.java</code>文件为<code>.class</code>文件</li>
<li><a href="https://arthas.aliyun.com/doc/redefine.html" target="_blank">redefine</a> - 加载外部的<code>.class</code>文件，redefine 到 JVM 里</li>
<li><a href="https://arthas.aliyun.com/doc/retransform.html" target="_blank">retransform</a> - 加载外部的<code>.class</code>文件，retransform 到 JVM 里</li>
<li><a href="https://arthas.aliyun.com/doc/sc.html" target="_blank">sc</a> - 查看 JVM 已加载的类信息</li>
<li><a href="https://arthas.aliyun.com/doc/sm.html" target="_blank">sm</a> - 查看已加载类的方法信息</li>
</ul>


<h3 class="relative group"><a href="https://arthas.aliyun.com/doc/commands.html#monitor-watch-trace-%e7%9b%b8%e5%85%b3" target="_blank">#</a>monitor/watch/trace 相关 
    <div id="httpsarthasaliyuncomdoccommandshtmlmonitor-watch-trace-%E7%9B%B8%E5%85%B3monitorwatchtrace-%E7%9B%B8%E5%85%B3" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#httpsarthasaliyuncomdoccommandshtmlmonitor-watch-trace-%E7%9B%B8%E5%85%B3monitorwatchtrace-%E7%9B%B8%E5%85%B3" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>注意</p>
<p>请注意，这些命令，都通过字节码增强技术来实现的，会在指定类的方法中插入一些切面来实现数据统计和观测，因此在线上、预发使用时，请尽量明确需要观测的类、方法以及条件，诊断结束要执行 <code>stop</code> 或将增强过的类执行 <code>reset</code> 命令。</p>
<ul>
<li><a href="https://arthas.aliyun.com/doc/monitor.html" target="_blank">monitor</a> - 方法执行监控</li>
<li><a href="https://arthas.aliyun.com/doc/stack.html" target="_blank">stack</a> - 输出当前方法被调用的调用路径</li>
<li><a href="https://arthas.aliyun.com/doc/trace.html" target="_blank">trace</a> - 方法内部调用路径，并输出方法路径上的每个节点上耗时</li>
<li><a href="https://arthas.aliyun.com/doc/tt.html" target="_blank">tt</a> - 方法执行数据的时空隧道，记录下指定方法每次调用的入参和返回信息，并能对这些不同的时间下调用进行观测</li>
<li><a href="https://arthas.aliyun.com/doc/watch.html" target="_blank">watch</a> - 方法执行数据观测</li>
</ul>


<h3 class="relative group"><a href="https://arthas.aliyun.com/doc/commands.html#profiler-%e7%81%ab%e7%84%b0%e5%9b%be" target="_blank">#</a>profiler/火焰图 
    <div id="httpsarthasaliyuncomdoccommandshtmlprofiler-%E7%81%AB%E7%84%B0%E5%9B%BEprofiler%E7%81%AB%E7%84%B0%E5%9B%BE" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#httpsarthasaliyuncomdoccommandshtmlprofiler-%E7%81%AB%E7%84%B0%E5%9B%BEprofiler%E7%81%AB%E7%84%B0%E5%9B%BE" aria-label="锚点">#</a>
    </span>        
    
</h3>
<ul>
<li><a href="https://arthas.aliyun.com/doc/profiler.html" target="_blank">profiler</a> - 使用<a href="https://github.com/jvm-profiling-tools/async-profiler" target="_blank">async-profiler在新窗口打开</a>对应用采样，生成火焰图</li>
<li><a href="https://arthas.aliyun.com/doc/jfr.html" target="_blank">jfr</a> - 动态开启关闭 JFR 记录</li>
</ul>


<h3 class="relative group"><a href="https://arthas.aliyun.com/doc/commands.html#%e9%89%b4%e6%9d%83" target="_blank">#</a>鉴权 
    <div id="httpsarthasaliyuncomdoccommandshtml%E9%89%B4%E6%9D%83%E9%89%B4%E6%9D%83" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#httpsarthasaliyuncomdoccommandshtml%E9%89%B4%E6%9D%83%E9%89%B4%E6%9D%83" aria-label="锚点">#</a>
    </span>        
    
</h3>
<ul>
<li><a href="https://arthas.aliyun.com/doc/auth.html" target="_blank">auth</a> - 鉴权</li>
</ul>


<h3 class="relative group"><a href="https://arthas.aliyun.com/doc/commands.html#options" target="_blank">#</a>options 
    <div id="httpsarthasaliyuncomdoccommandshtmloptionsoptions" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#httpsarthasaliyuncomdoccommandshtmloptionsoptions" aria-label="锚点">#</a>
    </span>        
    
</h3>
<ul>
<li><a href="https://arthas.aliyun.com/doc/options.html" target="_blank">options</a> - 查看或设置 Arthas 全局开关</li>
</ul>


<h3 class="relative group"><a href="https://arthas.aliyun.com/doc/commands.html#%e7%ae%a1%e9%81%93" target="_blank">#</a>管道 
    <div id="httpsarthasaliyuncomdoccommandshtml%E7%AE%A1%E9%81%93%E7%AE%A1%E9%81%93" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#httpsarthasaliyuncomdoccommandshtml%E7%AE%A1%E9%81%93%E7%AE%A1%E9%81%93" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>Arthas 支持使用管道对上述命令的结果进行进一步的处理，如<code>sm java.lang.String * | grep 'index'</code></p>
<ul>
<li><a href="https://arthas.aliyun.com/doc/grep.html" target="_blank">grep</a> - 搜索满足条件的结果</li>
<li>plaintext - 将命令的结果去除 ANSI 颜色</li>
<li>wc - 按行统计输出结果</li>
</ul>


<h3 class="relative group"><a href="https://arthas.aliyun.com/doc/commands.html#%e5%90%8e%e5%8f%b0%e5%bc%82%e6%ad%a5%e4%bb%bb%e5%8a%a1" target="_blank">#</a>后台异步任务 
    <div id="httpsarthasaliyuncomdoccommandshtml%E5%90%8E%E5%8F%B0%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1%E5%90%8E%E5%8F%B0%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#httpsarthasaliyuncomdoccommandshtml%E5%90%8E%E5%8F%B0%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1%E5%90%8E%E5%8F%B0%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>当线上出现偶发的问题，比如需要 watch 某个条件，而这个条件一天可能才会出现一次时，异步后台任务就派上用场了，详情请参考<a href="https://arthas.aliyun.com/doc/async.html" target="_blank">这里</a></p>
<ul>
<li>使用 <code>&gt;</code> 将结果重写向到日志文件，使用 <code>&amp;</code> 指定命令是后台运行，session 断开不影响任务执行（生命周期默认为 1 天）</li>
<li>jobs - 列出所有 job</li>
<li>kill - 强制终止任务</li>
<li>fg - 将暂停的任务拉到前台执行</li>
<li>bg - 将暂停的任务放到后台执行</li>
</ul>


<h3 class="relative group"><a href="https://arthas.aliyun.com/doc/commands.html#%e5%9f%ba%e7%a1%80%e5%91%bd%e4%bb%a4" target="_blank">#</a>基础命令 
    <div id="httpsarthasaliyuncomdoccommandshtml%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#httpsarthasaliyuncomdoccommandshtml%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4" aria-label="锚点">#</a>
    </span>        
    
</h3>
<ul>
<li><a href="https://arthas.aliyun.com/doc/base64.html" target="_blank">base64</a> - base64 编码转换，和 linux 里的 base64 命令类似</li>
<li><a href="https://arthas.aliyun.com/doc/cat.html" target="_blank">cat</a> - 打印文件内容，和 linux 里的 cat 命令类似</li>
<li><a href="https://arthas.aliyun.com/doc/cls.html" target="_blank">cls</a> - 清空当前屏幕区域</li>
<li><a href="https://arthas.aliyun.com/doc/echo.html" target="_blank">echo</a> - 打印参数，和 linux 里的 echo 命令类似</li>
<li><a href="https://arthas.aliyun.com/doc/grep.html" target="_blank">grep</a> - 匹配查找，和 linux 里的 grep 命令类似</li>
<li><a href="https://arthas.aliyun.com/doc/help.html" target="_blank">help</a> - 查看命令帮助信息</li>
<li><a href="https://arthas.aliyun.com/doc/history.html" target="_blank">history</a> - 打印命令历史</li>
<li><a href="https://arthas.aliyun.com/doc/keymap.html" target="_blank">keymap</a> - Arthas 快捷键列表及自定义快捷键</li>
<li><a href="https://arthas.aliyun.com/doc/pwd.html" target="_blank">pwd</a> - 返回当前的工作目录，和 linux 命令类似</li>
<li><a href="https://arthas.aliyun.com/doc/quit.html" target="_blank">quit</a> - 退出当前 Arthas 客户端，其他 Arthas 客户端不受影响</li>
<li><a href="https://arthas.aliyun.com/doc/reset.html" target="_blank">reset</a> - 重置增强类，将被 Arthas 增强过的类全部还原，Arthas 服务端关闭时会重置所有增强过的类</li>
<li><a href="https://arthas.aliyun.com/doc/session.html" target="_blank">session</a> - 查看当前会话的信息</li>
<li><a href="https://arthas.aliyun.com/doc/stop.html" target="_blank">stop</a> - 关闭 Arthas 服务端，所有 Arthas 客户端全部退出</li>
<li><a href="https://arthas.aliyun.com/doc/tee.html" target="_blank">tee</a> - 复制标准输入到标准输出和指定的文件，和 linux 里的 tee 命令类似</li>
<li><a href="https://arthas.aliyun.com/doc/version.html" target="_blank">version</a> - 输出当前目标 Java 进程所加载的 Arthas 版本号</li>
</ul>


<h2 class="relative group">4. 热部署 
    <div id="4-%E7%83%AD%E9%83%A8%E7%BD%B2" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#4-%E7%83%AD%E9%83%A8%E7%BD%B2" aria-label="锚点">#</a>
    </span>        
    
</h2>
<p>重启之后，字节码文件会恢复，除非将class文件放入jar包中进行更新</p>
<ol>
<li>
<p>在问题服务器上部署一个arthas，启动</p>
</li>
<li>
<p><code>jad --source-only 类全限定名 &gt; 目录/文件名.java</code></p>
<p>jad 命令反编译，可以使用vim来修改源码</p>
</li>
<li>
<p><code>mc -c 类加载器的hashcode 目录/文件名.java -d 输出目录</code></p>
<p>mc 命令编译修改过的代码</p>
</li>
<li>
<p><code>retransform 类文件所在目录/文件名.class</code></p>
<p>加载新的字节码，不能添加方法或字段，也不能更新正在执行中的方法</p>
</li>
</ol>

        </div>
        
        

        
        
  
  <section class="flex flex-row flex-wrap justify-center pt-4 text-xl">
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://TCmatj.github.io/docs/java/jvm/&amp;title=JVM"
      title="分享到 LinkedIn"
      aria-label="分享到 LinkedIn"
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>

  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://twitter.com/intent/tweet/?url=https://TCmatj.github.io/docs/java/jvm/&amp;text=JVM"
      title="分享到 Twitter"
      aria-label="分享到 Twitter"
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://bsky.app/intent/compose?text=JVM&#43;https://TCmatj.github.io/docs/java/jvm/"
      title=""
      aria-label=""
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256,232.562c-21.183,-41.196 -78.868,-117.97 -132.503,-155.834c-51.378,-36.272 -70.978,-29.987 -83.828,-24.181c-14.872,6.72 -17.577,29.554 -17.577,42.988c0,13.433 7.365,110.138 12.169,126.281c15.873,53.336 72.376,71.358 124.413,65.574c2.66,-0.395 5.357,-0.759 8.089,-1.097c-2.68,0.429 -5.379,0.796 -8.089,1.097c-76.259,11.294 -143.984,39.085 -55.158,137.972c97.708,101.165 133.908,-21.692 152.484,-83.983c18.576,62.291 39.972,180.718 150.734,83.983c83.174,-83.983 22.851,-126.674 -53.408,-137.969c-2.71,-0.302 -5.409,-0.667 -8.089,-1.096c2.732,0.337 5.429,0.702 8.089,1.096c52.037,5.785 108.54,-12.239 124.413,-65.574c4.804,-16.142 12.169,-112.847 12.169,-126.281c-0,-13.434 -2.705,-36.267 -17.577,-42.988c-12.85,-5.806 -32.45,-12.09 -83.829,24.181c-53.634,37.864 -111.319,114.635 -132.502,155.831Z"/></svg>
  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://reddit.com/submit/?url=https://TCmatj.github.io/docs/java/jvm/&amp;resubmit=true&amp;title=JVM"
      title="提交到 Reddit"
      aria-label="提交到 Reddit"
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M201.5 305.5c-13.8 0-24.9-11.1-24.9-24.6 0-13.8 11.1-24.9 24.9-24.9 13.6 0 24.6 11.1 24.6 24.9 0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4 0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7 0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9 0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5 0 52.6 59.2 95.2 132 95.2 73.1 0 132.3-42.6 132.3-95.2 0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6 0-2.2-2.2-6.1-2.2-8.3 0-2.5 2.5-2.5 6.4 0 8.6 22.8 22.8 87.3 22.8 110.2 0 2.5-2.2 2.5-6.1 0-8.6-2.2-2.2-6.1-2.2-8.3 0zm7.7-75c-13.6 0-24.6 11.1-24.6 24.9 0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.1 24.9-24.6 0-13.8-11-24.9-24.9-24.9z"/></svg>

  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://api.whatsapp.com/send?text=https://TCmatj.github.io/docs/java/jvm/&amp;resubmit=true&amp;title=JVM"
      title=""
      aria-label=""
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/></svg>

  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://t.me/share/url?url=https://TCmatj.github.io/docs/java/jvm/&amp;resubmit=true&amp;title=JVM"
      title=""
      aria-label=""
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M248,8C111.033,8,0,119.033,0,256S111.033,504,248,504,496,392.967,496,256,384.967,8,248,8ZM362.952,176.66c-3.732,39.215-19.881,134.378-28.1,178.3-3.476,18.584-10.322,24.816-16.948,25.425-14.4,1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25,5.342-39.5,3.652-3.793,67.107-61.51,68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608,69.142-14.845,10.194-26.894,9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7,18.45-13.7,108.446-47.248,144.628-62.3c68.872-28.647,83.183-33.623,92.511-33.789,2.052-.034,6.639.474,9.61,2.885a10.452,10.452,0,0,1,3.53,6.716A43.765,43.765,0,0,1,362.952,176.66Z"/></svg>

  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://pinterest.com/pin/create/bookmarklet/?url=https://TCmatj.github.io/docs/java/jvm/&amp;description=JVM"
      title="钉到 Pinterest"
      aria-label="钉到 Pinterest"
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M496 256c0 137-111 248-248 248-25.6 0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8 0 128.7-68.8 128.7-154.3 0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1 0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6 0-54.7 41.4-107.6 112-107.6 60.9 0 103.6 41.5 103.6 100.9 0 67.1-33.9 113.6-78 113.6-24.3 0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6 0-19-10.2-34.9-31.4-34.9-24.9 0-44.9 25.7-44.9 60.2 0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9 0 361.1 0 256 0 119 111 8 248 8s248 111 248 248z"/></svg>

  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="https://www.facebook.com/sharer/sharer.php?u=https://TCmatj.github.io/docs/java/jvm/&amp;quote=JVM"
      title="分享到 Facebook"
      aria-label="分享到 Facebook"
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>

  </span>


    </a>
      
    
      
      <a
      target="_blank"
      class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800"
      href="mailto:?body=https://TCmatj.github.io/docs/java/jvm/&amp;subject=JVM"
      title="通过电子邮件发送"
      aria-label="通过电子邮件发送"
      >
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1c-27.64 140.9 68.65 266.2 199.1 285.1c19.01 2.888 36.17-12.26 36.17-31.49l.0001-.6631c0-15.74-11.44-28.88-26.84-31.24c-84.35-12.98-149.2-86.13-149.2-174.2c0-102.9 88.61-185.5 193.4-175.4c91.54 8.869 158.6 91.25 158.6 183.2l0 16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98 .0036c-7.299 0-13.2 4.992-15.12 11.68c-24.85-12.15-54.24-16.38-86.06-5.106c-38.75 13.73-68.12 48.91-73.72 89.64c-9.483 69.01 43.81 128 110.9 128c26.44 0 50.43-9.544 69.59-24.88c24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3C495.1 107.1 361.2-9.332 207.8 20.73zM239.1 304.3c-26.47 0-48-21.56-48-48.05s21.53-48.05 48-48.05s48 21.56 48 48.05S266.5 304.3 239.1 304.3z"/></svg>

  </span>


    </a>
      
    
  </section>


        


  
      </div>
     
      
      
        
        
          
          
        
      <script>
        var oid = "views_docs\/Java\/JVM\/index.md"
        var oid_likes = "likes_docs\/Java\/JVM\/index.md"
      </script>
      
      
      
      <script type="text/javascript" src="/js/page.min.0860cf4e04fa2d72cc33ddba263083464d48f67de06114529043cb4623319efed4f484fd7f1730df5abea0e2da6f3538855634081d02f2d6e920b956f063e823.js" integrity="sha512-CGDPTgT6LXLMM926JjCDRk1I9n3gYRRSkEPLRiMxnv7U9IT9fxcw31q&#43;oOLabzU4hVY0CB0C8tbpILlW8GPoIw=="></script>
  
    </section>
  <footer class="pt-8 max-w-prose print:hidden">

    
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="flex group mr-3" href="/docs/%E5%B7%A5%E5%85%B7/linux/">
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Linux</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="0001-01-01 00:00:00 &#43;0000 UTC">0001-01-01</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
            <a class="flex text-right group ml-3" href="/docs/java/juc/">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >JUC</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="0001-01-01 00:00:00 &#43;0000 UTC">0001-01-01</time>
                  
                </span>
              </span>
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
            </a>
          
        </span>
      </div>
    </div>
  


    
  </footer>
</article>

      <div id="top-scroller" class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0">
  <a href="#the-top"
    class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="返回顶部" title="返回顶部">
    &uarr;
  </a>
</div>
    </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
    <nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400">
      <ul class="flex flex-col list-none sm:flex-row">
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href="/tags/"
            title="">
            
            标签
          </a>
        </li>
        
      </ul>
    </nav>
    
  
  <div class="flex items-center justify-between">

    
    
    <p class="text-sm text-neutral-500 dark:text-neutral-400">
      &copy;
      2024
      TCmatj
    </p>
    

    
    
    <p class="text-xs text-neutral-500 dark:text-neutral-400">
      
      
      由 <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a> 强力驱动
    </p>
    

  </div>
  <script>
    
    mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
      margin: 24,
      background: 'rgba(0,0,0,0.5)',
      scrollOffset: 0,
    })
    
  </script>
  
  
  <script type="text/javascript" src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js" integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
  <a rel="me" href="https://masto.ai/@blowfish"></a>
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]"
  data-url="https://TCmatj.github.io/"
  style="z-index:500"
>
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"
  >
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="搜索"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="关闭 (Esc)"
      >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

  </div>
</body>

<script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js"
  data-id="nunocoracao" data-description="Support me on Buy me a coffee!" data-message=""
  data-color="#FFDD00" data-position="Right" data-x_margin="18" data-y_margin="18"></script>

</html>
